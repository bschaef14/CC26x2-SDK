<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>TI-OpenThread: Command Line Example Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TI-OpenThread
   &#160;<span id="projectnumber">1.08.01.12</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Command Line Example Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Table of Contents</h2>
<ul>
<li><a href="#sysconfig-notice">SysConfig Notice</a></li>
<li><a href="#intro">Introduction</a></li>
<li><a href="#hardware-prereqs">Hardware Prerequisites</a></li>
<li><a href="#software-prereqs">Software Prerequisites</a></li>
<li><a href="#functional-desc">Functional Description</a><ul>
<li><a href="#software-overview">Software Overview</a><ul>
<li><a href="#application">Application Files</a></li>
<li><a href="#example-application">Example Application</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sysconfig">Configuration With SysConfig</a></li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#usage-buttons">Buttons</a></li>
<li><a href="#usage-display">Display</a></li>
<li><a href="#usage-setup-nwk">Setting up the Thread Network</a></li>
<li><a href="#usage-control">Interfacing with the Example Application</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="intro"></a> Introduction</h1>
<p>This document discusses how to use the Command Line Example Application.</p>
<p>The CLI example is the basic introduction to the Thread Stack. This example allows the user to explore the inner workings of the OpenThread stack. This example will allow you to form and join a network. The walk-through below will setup a basic ad-hoc Thread network between two CLI examples.</p>
<h1><a class="anchor" id="hardware-prereqs"></a> Hardware Prerequisites</h1>
<ul>
<li>2 x CC13X2 / CC26X2 Wireless MCU LaunchPads</li>
</ul>
<h1><a class="anchor" id="software-prereqs"></a> Software Prerequisites</h1>
<ul>
<li>Code Composer Studio (CCS) v10.0 or higher</li>
</ul>
<h1><a class="anchor" id="functional-desc"></a> Functional Description</h1>
<h2><a class="anchor" id="software-overview"></a> Software Overview</h2>
<p>This section describes software components and the corresponding source file.</p>
<h3><a class="anchor" id="application"></a> Application Files</h3>
<ul>
<li><code>main.c</code>: The main entry point for the example. Creates and starts the tasks for operating the OpenThread stack and CLI example.</li>
<li><code>cli.c</code>: Instantiation of command line object and heartbeat LED loop.</li>
<li><code>otstack.c</code>: OpenThread stack instantiation and processing.</li>
<li><code>task_config.h</code>: Defines RTOS task priorities and call stack sizes.</li>
<li><code>tiop_config.[ch]</code>: Contains OpenThread stack configurations. If using a SysConfig-enabled project (see the Configuration with SysConfig section below), these files are generated and configured through the SysConfig GUI. If using a non-SysConfig project, the files are a part of the project and parameters can be directly modified.</li>
</ul>
<h3><a class="anchor" id="example-application"></a> Example Application</h3>
<p>This application provides a simple debugging interface to the OpenThread stack. This application is used as the certification interface for the OpenThread stack to Thread test harness, but is also useful as an exploration tool.</p>
<p>Following is information on how to setup a simple network between two CLI examples. For a more in-depth explanation of the commands available, refer the README.md in the OpenThread source directory at <code>&lt;SDK_ROOT&gt;/source/third_party/openthread/src/cli/README.md</code>.</p>
<h1><a class="anchor" id="sysconfig"></a> Configuration With SysConfig</h1>
<p>SysConfig is a GUI configuration tool that allows for TI driver and stack configurations. In order to configure projects using SysConfig, use the SysConfig-enabled version of the Thread examples located in <code>&lt;SDK_ROOT&gt;/examples</code></p>
<p>To configure using SysConfig, import the SysConfig-enabled project into CCS. Double click the <code>*.syscfg</code> file from the CCS project explorer, where <code>*</code> is the name of the example project. The SysConfig GUI window will appear, where Thread stack and TI driver configurations can be adjusted. These settings will be reflected in the generated files <code>tiop_config.[ch]</code>.</p>
<p>The example project comes with working default settings for SysConfig. It is not recommended to change the default driver settings, as any changes may impact the functionality of the example. The Thread stack settings may be changed as required for your use case.</p>
<p>One important note about TI-OpenThread SysConfig is how SysConfig settings and non-volatile storage settings are applied. If the LaunchPad non-volatile holds a valid Thread dataset, SysConfig settings will not be applied on boot. SysConfig settings are only applied when non-volatile storage does not hold a valid Thread dataset. To guarantee SysConfig settings are applied, perform a factory reset of the non-volatile storage, as described below.</p>
<h1><a class="anchor" id="usage"></a> Usage</h1>
<p>This section describes how to set up and run the CLI Example Application.</p>
<h2><a class="anchor" id="usage-buttons"></a> Buttons</h2>
<ul>
<li><code>BTN-2</code> at boot: A factory reset of the non-volatile storage is performed. This must be pressed at the start of the <code>OtStack_task</code> function.</li>
</ul>
<h2><a class="anchor" id="usage-display"></a> Display</h2>
<p>The command line interface will present on the device's UART, and can be displayed through a serial terminal emulator. To enable the serial terminal in CCS press <code>Ctrl + Shift + Alt + T</code>, select <code>Serial Terminal</code> under <code>Choose terminal</code>, select <code>115200</code> for Baud Rate and click OK.</p>
<h2><a class="anchor" id="usage-setup-nwk"></a> Setting up the Thread Network</h2>
<p>This section describes how to set up a Thread network between two CLI devices. Program two LaunchPads with the CLI image and follow the steps below. One of the CLI examples must be a Full Thread Device (FTD).</p>
<p>On the first CLI example, press <code>Enter</code> to see a prompt <code>&gt;</code>. Then use the <code>channel</code> command to set the desired channel. Use the <code>panid</code> command to set the current running PAN. Finally use the commands <code>ifconfig up</code> and <code>thread start</code> to start the Thread stack. Below is an example of bringing up a device on channel <code>14</code> and PANID <code>0xface</code>.</p>
<div class="fragment"><div class="line">&gt; channel 14</div><div class="line">Done</div><div class="line">&gt; panid 0xface</div><div class="line">Done</div><div class="line">&gt; ifconfig up</div><div class="line">Done</div><div class="line">&gt; thread start</div><div class="line">Done</div><div class="line">&gt; state</div><div class="line">detached</div><div class="line">&gt; state</div><div class="line">leader</div><div class="line">&gt;</div></div><!-- fragment --><p>On the second CLI example, press <code>Enter</code> to see a prompt <code>&gt;</code>. Then use the <code>scan</code> command to make sure that this LaunchPad can see the first one. The following prompt may be swallowed up by the output of the scan, press <code>Enter</code> to get the prompt again. Then use the <code>channel</code> and <code>panid</code> commands as in the first example to set the same channel and PANID. Finally, use the <code>ifconfig up</code> and <code>thread start</code> commands to start the Thread stack. The second example will connect to the first example as a child.</p>
<div class="fragment"><div class="line">&gt; scan</div><div class="line">| J | Network Name     | Extended PAN     | PAN  | MAC Address      | Ch | dBm | LQI |</div><div class="line">+---+------------------+------------------+------+------------------+----+-----+-----+</div><div class="line">&gt; | 0 | OpenThread       | dead00beef00cafe | face | 9e782c4394ca339f | 14 | -63 |  61 |</div><div class="line">Done</div><div class="line"></div><div class="line">&gt; channel 14</div><div class="line">Done</div><div class="line">&gt; panid 0xface</div><div class="line">Done</div><div class="line">&gt; ifconfig up</div><div class="line">Done</div><div class="line">&gt; thread start</div><div class="line">Done</div><div class="line">&gt; state</div><div class="line">child</div><div class="line">&gt;</div></div><!-- fragment --><h2><a class="anchor" id="usage-control"></a> Pinging between the CLI examples</h2>
<p>Once you have setup the network as above, you can ping between the two nodes. Here we ping the IPv6 relm-local all nodes multicast address, and get a response from our leader's link local address.</p>
<div class="fragment"><div class="line">&gt; ping ff03::1</div><div class="line">&gt; 8 bytes from fe80:0:0:0:f423:af0:300:b057: icmp_seq=1 hlim=64 time=37ms</div><div class="line"></div><div class="line">&gt;</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2020</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
