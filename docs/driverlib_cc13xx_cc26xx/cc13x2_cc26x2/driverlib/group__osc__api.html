<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.ico" >
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>CC26xx Driver Library: [osc.h] Oscillator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ti_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%">
 <tbody>
 <tr>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CC26xx Driver Library
   </div>
  </td>
  <td id="projectlogo"><a href="http://www.ti.com"><img align="right" alt="Logo" src="ti_logo_header.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>APIs</span></a></li>
      <li><a href="usergroup0.html"><span>Register&#160;Descriptions</span></a></li>
      <li><a href="usergroup1.html"><span>Online&#160;Resources</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__osc__api.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">[osc.h] Oscillator<div class="ingroups"><a class="el" href="group__system__control__group.html">System Control</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_hposc_debug_data__t.html">HposcDebugData_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data structure for experimental HPOSC polynomials calculation.  <a href="struct_hposc_debug_data__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga5f00114c27141d4a48934cad95b0daa0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga5f00114c27141d4a48934cad95b0daa0">OSCXHfPowerModeSet</a> (uint32_t ui32Mode)</td></tr>
<tr class="memdesc:ga5f00114c27141d4a48934cad95b0daa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Power Mode for High Frequency XTAL Oscillator.  <a href="#ga5f00114c27141d4a48934cad95b0daa0">More...</a><br /></td></tr>
<tr class="separator:ga5f00114c27141d4a48934cad95b0daa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga466c89b836c6b60214fec5b5e8e0719d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga466c89b836c6b60214fec5b5e8e0719d">OSCClockLossEventEnable</a> (void)</td></tr>
<tr class="memdesc:ga466c89b836c6b60214fec5b5e8e0719d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables OSC clock loss event detection.  <a href="#ga466c89b836c6b60214fec5b5e8e0719d">More...</a><br /></td></tr>
<tr class="separator:ga466c89b836c6b60214fec5b5e8e0719d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c7823a2f4fc61456f576bf472ed2308"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga8c7823a2f4fc61456f576bf472ed2308">OSCClockLossEventDisable</a> (void)</td></tr>
<tr class="memdesc:ga8c7823a2f4fc61456f576bf472ed2308"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables OSC clock loss event detection.  <a href="#ga8c7823a2f4fc61456f576bf472ed2308">More...</a><br /></td></tr>
<tr class="separator:ga8c7823a2f4fc61456f576bf472ed2308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga37a02687fbd8680396550f682a7f046f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet</a> (uint32_t ui32SrcClk, uint32_t ui32Osc)</td></tr>
<tr class="memdesc:ga37a02687fbd8680396550f682a7f046f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the oscillator input to the a source clock.  <a href="#ga37a02687fbd8680396550f682a7f046f">More...</a><br /></td></tr>
<tr class="separator:ga37a02687fbd8680396550f682a7f046f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga279bd3a34548bd4c5e2fc6939f7be228"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet</a> (uint32_t ui32SrcClk)</td></tr>
<tr class="memdesc:ga279bd3a34548bd4c5e2fc6939f7be228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the source clock settings.  <a href="#ga279bd3a34548bd4c5e2fc6939f7be228">More...</a><br /></td></tr>
<tr class="separator:ga279bd3a34548bd4c5e2fc6939f7be228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae135dfece97e821338b93c4b32bc6980"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#gae135dfece97e821338b93c4b32bc6980">OSCHfSourceReady</a> (void)</td></tr>
<tr class="memdesc:gae135dfece97e821338b93c4b32bc6980"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the HF clock source is ready to be switched.  <a href="#gae135dfece97e821338b93c4b32bc6980">More...</a><br /></td></tr>
<tr class="separator:gae135dfece97e821338b93c4b32bc6980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac21e7c4532672c8fa7b90e493359ddc2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch</a> (void)</td></tr>
<tr class="memdesc:gac21e7c4532672c8fa7b90e493359ddc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch the high frequency clock.  <a href="#gac21e7c4532672c8fa7b90e493359ddc2">More...</a><br /></td></tr>
<tr class="separator:gac21e7c4532672c8fa7b90e493359ddc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab87ed4367df0895082a9baf6692f85e7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#gab87ed4367df0895082a9baf6692f85e7">OSC_IsHPOSCEnabled</a> (void)</td></tr>
<tr class="memdesc:gab87ed4367df0895082a9baf6692f85e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies if HPOSC is enabled.  <a href="#gab87ed4367df0895082a9baf6692f85e7">More...</a><br /></td></tr>
<tr class="separator:gab87ed4367df0895082a9baf6692f85e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48e5359a19bd95b63dfab58bf67c5ec6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga48e5359a19bd95b63dfab58bf67c5ec6">OSC_IsHPOSCEnabledWithHfDerivedLfClock</a> (void)</td></tr>
<tr class="memdesc:ga48e5359a19bd95b63dfab58bf67c5ec6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies if HPOSC is enabled and that SCLK_LF is derived from XOSC_HF.  <a href="#ga48e5359a19bd95b63dfab58bf67c5ec6">More...</a><br /></td></tr>
<tr class="separator:ga48e5359a19bd95b63dfab58bf67c5ec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f7fce82e80c984531622af61963db51"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga8f7fce82e80c984531622af61963db51">OSCHF_GetStartupTime</a> (uint32_t timeUntilWakeupInMs)</td></tr>
<tr class="memdesc:ga8f7fce82e80c984531622af61963db51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns maximum startup time (in microseconds) of XOSC_HF.  <a href="#ga8f7fce82e80c984531622af61963db51">More...</a><br /></td></tr>
<tr class="separator:ga8f7fce82e80c984531622af61963db51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee5a511c4ca70e8eb66f4a6252488506"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#gaee5a511c4ca70e8eb66f4a6252488506">OSCHF_TurnOnXosc</a> (void)</td></tr>
<tr class="memdesc:gaee5a511c4ca70e8eb66f4a6252488506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns on XOSC_HF (but without switching to XOSC_HF).  <a href="#gaee5a511c4ca70e8eb66f4a6252488506">More...</a><br /></td></tr>
<tr class="separator:gaee5a511c4ca70e8eb66f4a6252488506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47914d2750ee826560f2107a567bb1a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4">OSCHF_AttemptToSwitchToXosc</a> (void)</td></tr>
<tr class="memdesc:ga47914d2750ee826560f2107a567bb1a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch to XOSC_HF if XOSC_HF is ready.  <a href="#ga47914d2750ee826560f2107a567bb1a4">More...</a><br /></td></tr>
<tr class="separator:ga47914d2750ee826560f2107a567bb1a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9eeb99e769d9c911305ff4c3c33c736c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c">OSCHF_SwitchToRcOscTurnOffXosc</a> (void)</td></tr>
<tr class="memdesc:ga9eeb99e769d9c911305ff4c3c33c736c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch to RCOSC_HF and turn off XOSC_HF.  <a href="#ga9eeb99e769d9c911305ff4c3c33c736c">More...</a><br /></td></tr>
<tr class="separator:ga9eeb99e769d9c911305ff4c3c33c736c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33e3c6c58c877cfa2be8221148ed1885"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga33e3c6c58c877cfa2be8221148ed1885">OSCHF_DebugGetCrystalAmplitude</a> (void)</td></tr>
<tr class="memdesc:ga33e3c6c58c877cfa2be8221148ed1885"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get crystal amplitude (assuming crystal is running).  <a href="#ga33e3c6c58c877cfa2be8221148ed1885">More...</a><br /></td></tr>
<tr class="separator:ga33e3c6c58c877cfa2be8221148ed1885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19ebf81100cd985a838276260fde3cab"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga19ebf81100cd985a838276260fde3cab">OSCHF_DebugGetExpectedAverageCrystalAmplitude</a> (void)</td></tr>
<tr class="memdesc:ga19ebf81100cd985a838276260fde3cab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the expected average crystal amplitude.  <a href="#ga19ebf81100cd985a838276260fde3cab">More...</a><br /></td></tr>
<tr class="separator:ga19ebf81100cd985a838276260fde3cab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7edb8da7333e41c49190bc2df3df9004"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga7edb8da7333e41c49190bc2df3df9004">OSCHF_DebugGetCrystalStartupTime</a> (void)</td></tr>
<tr class="memdesc:ga7edb8da7333e41c49190bc2df3df9004"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measure the crystal startup time.  <a href="#ga7edb8da7333e41c49190bc2df3df9004">More...</a><br /></td></tr>
<tr class="separator:ga7edb8da7333e41c49190bc2df3df9004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ee930c5e3e44545e4b242cb819548ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga4ee930c5e3e44545e4b242cb819548ed">OSC_HPOSCInitializeFrequencyOffsetParameters</a> (void)</td></tr>
<tr class="memdesc:ga4ee930c5e3e44545e4b242cb819548ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">HPOSC initialization function. Must always be called before using HPOSC.  <a href="#ga4ee930c5e3e44545e4b242cb819548ed">More...</a><br /></td></tr>
<tr class="separator:ga4ee930c5e3e44545e4b242cb819548ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabadd450fc6dfeab7371e0838c096d5e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#gabadd450fc6dfeab7371e0838c096d5e1">OSC_HPOSC_Debug_InitFreqOffsetParams</a> (<a class="el" href="struct_hposc_debug_data__t.html">HposcDebugData_t</a> *pDebugData)</td></tr>
<tr class="memdesc:gabadd450fc6dfeab7371e0838c096d5e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug function to calculate the HPOSC polynomials for experimental data sets.  <a href="#gabadd450fc6dfeab7371e0838c096d5e1">More...</a><br /></td></tr>
<tr class="separator:gabadd450fc6dfeab7371e0838c096d5e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf0f1134cc52278702eb990958316701"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#gabf0f1134cc52278702eb990958316701">OSC_HPOSCInitializeSingleInsertionFreqOffsParams</a> (uint32_t measFieldAddress)</td></tr>
<tr class="memdesc:gabf0f1134cc52278702eb990958316701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special HPOSC initialization function for single temperature compensation.  <a href="#gabf0f1134cc52278702eb990958316701">More...</a><br /></td></tr>
<tr class="separator:gabf0f1134cc52278702eb990958316701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d974140ed2a25ffbb5dd851c63cbb8d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga5d974140ed2a25ffbb5dd851c63cbb8d">OSC_HPOSCRelativeFrequencyOffsetGet</a> (int32_t tempDegC)</td></tr>
<tr class="memdesc:ga5d974140ed2a25ffbb5dd851c63cbb8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the temperature dependent relative frequency offset of HPOSC.  <a href="#ga5d974140ed2a25ffbb5dd851c63cbb8d">More...</a><br /></td></tr>
<tr class="separator:ga5d974140ed2a25ffbb5dd851c63cbb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf89bfa9d2f0723c272f6884a1cfe8ec7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#gaf89bfa9d2f0723c272f6884a1cfe8ec7">OSC_AdjustXoscHfCapArray</a> (int32_t capArrDelta)</td></tr>
<tr class="memdesc:gaf89bfa9d2f0723c272f6884a1cfe8ec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the XOSC HF cap array relative to the factory setting.  <a href="#gaf89bfa9d2f0723c272f6884a1cfe8ec7">More...</a><br /></td></tr>
<tr class="separator:gaf89bfa9d2f0723c272f6884a1cfe8ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4117910cda25374e78214e2b632102a7"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga4117910cda25374e78214e2b632102a7">OSC_HPOSCRelativeFrequencyOffsetToRFCoreFormatConvert</a> (int32_t HPOSC_RelFreqOffset)</td></tr>
<tr class="memdesc:ga4117910cda25374e78214e2b632102a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the relative frequency offset of HPOSC to the RF Core parameter format.  <a href="#ga4117910cda25374e78214e2b632102a7">More...</a><br /></td></tr>
<tr class="separator:ga4117910cda25374e78214e2b632102a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77ce1fdfe6f45ea25147b5282f3a2f08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osc__api.html#ga77ce1fdfe6f45ea25147b5282f3a2f08">OSC_HPOSCRtcCompensate</a> (int32_t relFreqOffset)</td></tr>
<tr class="memdesc:ga77ce1fdfe6f45ea25147b5282f3a2f08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compensate the RTC increment based on the relative frequency offset of HPOSC.  <a href="#ga77ce1fdfe6f45ea25147b5282f3a2f08">More...</a><br /></td></tr>
<tr class="separator:ga77ce1fdfe6f45ea25147b5282f3a2f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaf89bfa9d2f0723c272f6884a1cfe8ec7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSC_AdjustXoscHfCapArray </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>capArrDelta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the XOSC HF cap array relative to the factory setting. </p>
<p>The cap array factory setting (FCFG) can be converted to a number in the range 0 - 63. Both this function and the customer configuration (CCFG) setting can apply a delta to the FCFG setting. The CCFG setting is automatically applied at boot time (See ../startup_files/ccfg.c). Calling this function will discard the CCFG setting and adjust relative to the FCFG setting.</p>
<dl class="section note"><dt>Note</dt><dd>Adjusted value will not take effect before XOSC_HF is stopped and restarted</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">capArrDelta</td><td>specifies number of step to adjust the cap array relative to the factory setting.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="comment">// read the MODE_CONF register in CCFG</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   uint32_t ccfg_ModeConfReg = HWREG( <a href=../register_descriptions/CPU_MMAP/CCFG.html target="_blank">CCFG_BASE</a> + <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF target="_blank">CCFG_O_MODE_CONF</a> );</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="comment">// Clear CAP_MODE and the CAPARRAY_DELATA field</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   ccfg_ModeConfReg &amp;= ~( <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_XOSC_CAPARRAY_DELTA target="_blank">CCFG_MODE_CONF_XOSC_CAPARRAY_DELTA_M</a> | <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_XOSC_CAP_MOD target="_blank">CCFG_MODE_CONF_XOSC_CAP_MOD_M</a> );</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <span class="comment">// Insert new delta value</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   ccfg_ModeConfReg |= ((((uint32_t)capArrDelta) &lt;&lt; <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_XOSC_CAPARRAY_DELTA target="_blank">CCFG_MODE_CONF_XOSC_CAPARRAY_DELTA_S</a> ) &amp; <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_XOSC_CAPARRAY_DELTA target="_blank">CCFG_MODE_CONF_XOSC_CAPARRAY_DELTA_M</a> );</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="comment">// Update the HW register with the new delta value</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <a class="code" href="group__ddi__api.html#ga13a6c30b833a20556c48429303b64caf">DDI32RegWrite</a>(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#ANABYPASSVAL1 target="_blank">DDI_0_OSC_O_ANABYPASSVAL1</a>, <a class="code" href="group__setup__rom__api.html#ga0425895c98068d0bec7a7e51e120e051">SetupGetTrimForAnabypassValue1</a>( ccfg_ModeConfReg ));</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
<div class="ttc" id="group__setup__rom__api_html_ga0425895c98068d0bec7a7e51e120e051"><div class="ttname"><a href="group__setup__rom__api.html#ga0425895c98068d0bec7a7e51e120e051">SetupGetTrimForAnabypassValue1</a></div><div class="ttdeci">uint32_t SetupGetTrimForAnabypassValue1(uint32_t ccfg_ModeConfReg)</div><div class="ttdoc">Returns the trim value to be used for the ANABYPASS_VALUE1 register in OSC_DIG. </div><div class="ttdef"><b>Definition:</b> setup_rom.c:438</div></div>
<div class="ttc" id="group__ddi__api_html_ga13a6c30b833a20556c48429303b64caf"><div class="ttname"><a href="group__ddi__api.html#ga13a6c30b833a20556c48429303b64caf">DDI32RegWrite</a></div><div class="ttdeci">void DDI32RegWrite(uint32_t ui32Base, uint32_t ui32Reg, uint32_t ui32Val)</div><div class="ttdoc">Write a 32 bit value to a register in the DDI slave. </div><div class="ttdef"><b>Definition:</b> ddi.c:66</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_gaf89bfa9d2f0723c272f6884a1cfe8ec7_cgraph.png" border="0" usemap="#group__osc__api_gaf89bfa9d2f0723c272f6884a1cfe8ec7_cgraph" alt=""/></div>
<map name="group__osc__api_gaf89bfa9d2f0723c272f6884a1cfe8ec7_cgraph" id="group__osc__api_gaf89bfa9d2f0723c272f6884a1cfe8ec7_cgraph">
<area shape="rect" id="node2" href="group__ddi__api.html#ga13a6c30b833a20556c48429303b64caf" title="Write a 32 bit value to a register in the DDI slave. " alt="" coords="279,5,390,32"/>
<area shape="rect" id="node3" href="group__setup__rom__api.html#ga0425895c98068d0bec7a7e51e120e051" title="Returns the trim value to be used for the ANABYPASS_VALUE1 register in OSC_DIG. " alt="" coords="241,57,428,98"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabadd450fc6dfeab7371e0838c096d5e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSC_HPOSC_Debug_InitFreqOffsetParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_hposc_debug_data__t.html">HposcDebugData_t</a> *&#160;</td>
          <td class="paramname"><em>pDebugData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debug function to calculate the HPOSC polynomials for experimental data sets. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pDebugData</td><td>pointer to the input data collected in <a class="el" href="struct_hposc_debug_data__t.html">HposcDebugData_t</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga4ee930c5e3e44545e4b242cb819548ed" title="HPOSC initialization function. Must always be called before using HPOSC. ">OSC_HPOSCInitializeFrequencyOffsetParameters()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;{</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">/* Initialize HPOSC internal parameter */</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="structhposc__insertions__t.html">hposc_insertions_t</a>  hposcMeas;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    int64_t pu0[3],pu1[3],pu2[3] = {0};</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="structhposc__param__t.html">hposc_param_t</a> hposcParm =</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        .<a class="code" href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">pu0b</a> = {42, 32, 27, 20},</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        .pu0c = {-284,-184,536,-104798},</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        .pu1b = {36, 32, 27, 20},</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        .pu1c = {-1155,44130,-319090,-3563},</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        .pu2b = {36, 32, 27, 20},</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        .pu2c = {-3410,261727,-32194,-116627}</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    };</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="comment">/* Retrieve insertions from FCFG */</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a>((uint32_t)&amp;pDebugData-&gt;<a class="code" href="struct_hposc_debug_data__t.html#ae5da581c4c79162cb43def3838b02e63">meas_1</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[0], pDebugData-&gt;<a class="code" href="struct_hposc_debug_data__t.html#a982afa3045d926fe46ddf2ae1e2c8131">offsetD1</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a>((uint32_t)&amp;pDebugData-&gt;<a class="code" href="struct_hposc_debug_data__t.html#a7664689173046d912735a1163ba7ed19">meas_2</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[1], &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[1], pDebugData-&gt;<a class="code" href="struct_hposc_debug_data__t.html#af0bf53a145c06b7d60a73fce8781771a">offsetD2</a>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a>((uint32_t)&amp;pDebugData-&gt;<a class="code" href="struct_hposc_debug_data__t.html#a8824f793feefe3f08187474d290a87bb">meas_3</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[2], &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[2], pDebugData-&gt;<a class="code" href="struct_hposc_debug_data__t.html#a651b8291ee3ca9cbce9b486df32b2dde">offsetD3</a>);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">/* Compute HPOSC polynomial coefficients */</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a>(hposcParm.<a class="code" href="structhposc__param__t.html#a2ef374987853f9083ec982a96a77f674">pu0c</a>, hposcParm.<a class="code" href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">pu0b</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], 3, pu0);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a>(hposcParm.<a class="code" href="structhposc__param__t.html#ae8f2cd6c4d6aac6982aadcc9a685087d">pu1c</a>, hposcParm.<a class="code" href="structhposc__param__t.html#a1dadcf06d54f6f1db94ea3e691094827">pu1b</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], 3, pu1);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a>(hposcParm.<a class="code" href="structhposc__param__t.html#a76bbdda081d3888dafec1cb6871d66f3">pu2c</a>, hposcParm.<a class="code" href="structhposc__param__t.html#aaea7325ad059866c20630de1d879388b">pu2b</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], 3, pu2);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3">findHposcCoefficients</a>(&amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[0], pu0, pu1, pu2, &amp;hposcParm);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;}</div>
<div class="ttc" id="structhposc__param__t_html_aaea7325ad059866c20630de1d879388b"><div class="ttname"><a href="structhposc__param__t.html#aaea7325ad059866c20630de1d879388b">hposc_param_t::pu2b</a></div><div class="ttdeci">uint8_t pu2b[4]</div><div class="ttdef"><b>Definition:</b> osc.c:366</div></div>
<div class="ttc" id="struct_hposc_debug_data__t_html_a651b8291ee3ca9cbce9b486df32b2dde"><div class="ttname"><a href="struct_hposc_debug_data__t.html#a651b8291ee3ca9cbce9b486df32b2dde">HposcDebugData_t::offsetD3</a></div><div class="ttdeci">int32_t offsetD3</div><div class="ttdoc">Offset to measurement set 3. </div><div class="ttdef"><b>Definition:</b> osc.h:541</div></div>
<div class="ttc" id="struct_hposc_debug_data__t_html_a982afa3045d926fe46ddf2ae1e2c8131"><div class="ttname"><a href="struct_hposc_debug_data__t.html#a982afa3045d926fe46ddf2ae1e2c8131">HposcDebugData_t::offsetD1</a></div><div class="ttdeci">int32_t offsetD1</div><div class="ttdoc">Offset to measurement set 1. </div><div class="ttdef"><b>Definition:</b> osc.h:539</div></div>
<div class="ttc" id="structhposc__param__t_html_a2ef374987853f9083ec982a96a77f674"><div class="ttname"><a href="structhposc__param__t.html#a2ef374987853f9083ec982a96a77f674">hposc_param_t::pu0c</a></div><div class="ttdeci">int64_t pu0c[4]</div><div class="ttdef"><b>Definition:</b> osc.c:367</div></div>
<div class="ttc" id="osc_8c_html_ad07ae489bb66d205fc64e9ac83d6306d"><div class="ttname"><a href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a></div><div class="ttdeci">static void readTempAndFreq(uint32_t regAddr, int32_t *pTemp, int32_t *pdFreq, int32_t deltaFreq)</div><div class="ttdef"><b>Definition:</b> osc.c:481</div></div>
<div class="ttc" id="struct_hposc_debug_data__t_html_ae5da581c4c79162cb43def3838b02e63"><div class="ttname"><a href="struct_hposc_debug_data__t.html#ae5da581c4c79162cb43def3838b02e63">HposcDebugData_t::meas_1</a></div><div class="ttdeci">uint32_t meas_1</div><div class="ttdoc">Measurement set 1 (typically at room temp) </div><div class="ttdef"><b>Definition:</b> osc.h:536</div></div>
<div class="ttc" id="structhposc__insertions__t_html"><div class="ttname"><a href="structhposc__insertions__t.html">hposc_insertions_t</a></div><div class="ttdef"><b>Definition:</b> osc.c:356</div></div>
<div class="ttc" id="struct_hposc_debug_data__t_html_a8824f793feefe3f08187474d290a87bb"><div class="ttname"><a href="struct_hposc_debug_data__t.html#a8824f793feefe3f08187474d290a87bb">HposcDebugData_t::meas_3</a></div><div class="ttdeci">uint32_t meas_3</div><div class="ttdoc">Measurement set 3 (typically at low temp) </div><div class="ttdef"><b>Definition:</b> osc.h:538</div></div>
<div class="ttc" id="structhposc__param__t_html_ae8f2cd6c4d6aac6982aadcc9a685087d"><div class="ttname"><a href="structhposc__param__t.html#ae8f2cd6c4d6aac6982aadcc9a685087d">hposc_param_t::pu1c</a></div><div class="ttdeci">int64_t pu1c[4]</div><div class="ttdef"><b>Definition:</b> osc.c:368</div></div>
<div class="ttc" id="struct_hposc_debug_data__t_html_af0bf53a145c06b7d60a73fce8781771a"><div class="ttname"><a href="struct_hposc_debug_data__t.html#af0bf53a145c06b7d60a73fce8781771a">HposcDebugData_t::offsetD2</a></div><div class="ttdeci">int32_t offsetD2</div><div class="ttdoc">Offset to measurement set 2. </div><div class="ttdef"><b>Definition:</b> osc.h:540</div></div>
<div class="ttc" id="osc_8c_html_a7309c79535cc459a5a2b5a684adcd4a3"><div class="ttname"><a href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3">findHposcCoefficients</a></div><div class="ttdeci">static void findHposcCoefficients(int32_t *pInput, int64_t *col0, int64_t *col1, int64_t *col2, hposc_param_t *pParam)</div><div class="ttdef"><b>Definition:</b> osc.c:408</div></div>
<div class="ttc" id="osc_8c_html_a65f9abc588f14b672c3ecfa0dcc8783f"><div class="ttname"><a href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a></div><div class="ttdeci">static void findHposcPc(int64_t *pCoeff, uint8_t *pBits, int32_t *pTemp, uint8_t nTemp, int64_t *pOutput)</div><div class="ttdef"><b>Definition:</b> osc.c:464</div></div>
<div class="ttc" id="struct_hposc_debug_data__t_html_a7664689173046d912735a1163ba7ed19"><div class="ttname"><a href="struct_hposc_debug_data__t.html#a7664689173046d912735a1163ba7ed19">HposcDebugData_t::meas_2</a></div><div class="ttdeci">uint32_t meas_2</div><div class="ttdoc">Measurement set 2 (typically at high temp) </div><div class="ttdef"><b>Definition:</b> osc.h:537</div></div>
<div class="ttc" id="structhposc__insertions__t_html_af82d605ca8ade25ac5c333a57626c0dc"><div class="ttname"><a href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">hposc_insertions_t::dFreq</a></div><div class="ttdeci">int32_t dFreq[3]</div><div class="ttdef"><b>Definition:</b> osc.c:359</div></div>
<div class="ttc" id="structhposc__param__t_html_a5ecbb1a1411850b126d059513129667a"><div class="ttname"><a href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">hposc_param_t::pu0b</a></div><div class="ttdeci">uint8_t pu0b[4]</div><div class="ttdef"><b>Definition:</b> osc.c:364</div></div>
<div class="ttc" id="structhposc__param__t_html_a1dadcf06d54f6f1db94ea3e691094827"><div class="ttname"><a href="structhposc__param__t.html#a1dadcf06d54f6f1db94ea3e691094827">hposc_param_t::pu1b</a></div><div class="ttdeci">uint8_t pu1b[4]</div><div class="ttdef"><b>Definition:</b> osc.c:365</div></div>
<div class="ttc" id="structhposc__param__t_html"><div class="ttname"><a href="structhposc__param__t.html">hposc_param_t</a></div><div class="ttdef"><b>Definition:</b> osc.c:362</div></div>
<div class="ttc" id="structhposc__param__t_html_a76bbdda081d3888dafec1cb6871d66f3"><div class="ttname"><a href="structhposc__param__t.html#a76bbdda081d3888dafec1cb6871d66f3">hposc_param_t::pu2c</a></div><div class="ttdeci">int64_t pu2c[4]</div><div class="ttdef"><b>Definition:</b> osc.c:369</div></div>
<div class="ttc" id="structhposc__insertions__t_html_a58f0f42fdb09c367fcb7fcf16c2a97f9"><div class="ttname"><a href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">hposc_insertions_t::temp</a></div><div class="ttdeci">int32_t temp[3]</div><div class="ttdef"><b>Definition:</b> osc.c:358</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_gabadd450fc6dfeab7371e0838c096d5e1_cgraph.png" border="0" usemap="#group__osc__api_gabadd450fc6dfeab7371e0838c096d5e1_cgraph" alt=""/></div>
<map name="group__osc__api_gabadd450fc6dfeab7371e0838c096d5e1_cgraph" id="group__osc__api_gabadd450fc6dfeab7371e0838c096d5e1_cgraph">
<area shape="rect" id="node2" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d" title="readTempAndFreq" alt="" coords="260,5,388,32"/>
<area shape="rect" id="node3" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f" title="findHposcPc" alt="" coords="277,56,371,83"/>
<area shape="rect" id="node4" href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3" title="findHposcCoefficients" alt="" coords="251,107,397,133"/>
<area shape="rect" id="node5" href="osc_8c.html#a27f042117ef7827fdddcc83fed89dcf9" title="findDenominator" alt="" coords="445,56,560,83"/>
<area shape="rect" id="node6" href="osc_8c.html#ad6f165e3d890dae06b1c4619d202cab7" title="multiplyColumns" alt="" coords="608,81,727,108"/>
<area shape="rect" id="node7" href="osc_8c.html#ae3080286e6fc927ebc788ddf47aeeb87" title="findNumerator" alt="" coords="451,157,554,184"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4ee930c5e3e44545e4b242cb819548ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSC_HPOSCInitializeFrequencyOffsetParameters </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HPOSC initialization function. Must always be called before using HPOSC. </p>
<p>Calculates the fitting curve parameters (polynomials) to be used by the HPOSC temperature compensation.</p>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#gabadd450fc6dfeab7371e0838c096d5e1" title="Debug function to calculate the HPOSC polynomials for experimental data sets. ">OSC_HPOSC_Debug_InitFreqOffsetParams()</a>, <a class="el" href="group__osc__api.html#gabf0f1134cc52278702eb990958316701" title="Special HPOSC initialization function for single temperature compensation. ">OSC_HPOSCInitializeSingleInsertionFreqOffsParams()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;{</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">/* Initialize HPOSC internal parameter */</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="structhposc__insertions__t.html">hposc_insertions_t</a>  hposcMeas;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    int64_t pu0[3],pu1[3],pu2[3] = {0};</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="structhposc__param__t.html">hposc_param_t</a> hposcParm =</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        .<a class="code" href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">pu0b</a> = {42, 32, 27, 20},</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        .pu0c = {-284,-184,536,-104798},</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        .pu1b = {36, 32, 27, 20},</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        .pu1c = {-1155,44130,-319090,-3563},</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        .pu2b = {36, 32, 27, 20},</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        .pu2c = {-3410,261727,-32194,-116627}</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    };</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">/* Retrieve insertions from FCFG */</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a>(<a href=../register_descriptions/CPU_MMAP/FCFG1.html target="_blank">FCFG1_BASE</a> + <a href=../register_descriptions/CPU_MMAP/FCFG1.html#HPOSC_MEAS_1 target="_blank">FCFG1_O_HPOSC_MEAS_1</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[0], <a class="code" href="osc_8c.html#a5dbce9b2f44286bc3d8c99ba8adf5c2f">D1OFFSET_25C</a>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a>(<a href=../register_descriptions/CPU_MMAP/FCFG1.html target="_blank">FCFG1_BASE</a> + <a href=../register_descriptions/CPU_MMAP/FCFG1.html#HPOSC_MEAS_2 target="_blank">FCFG1_O_HPOSC_MEAS_2</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[1], &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[1], <a class="code" href="osc_8c.html#ae057d50f2181d3a033c4e006315b9a17">D2OFFSET_85C</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a>(<a href=../register_descriptions/CPU_MMAP/FCFG1.html target="_blank">FCFG1_BASE</a> + <a href=../register_descriptions/CPU_MMAP/FCFG1.html#HPOSC_MEAS_3 target="_blank">FCFG1_O_HPOSC_MEAS_3</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[2], &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[2], <a class="code" href="osc_8c.html#a789a842493cac3a154a1f58b5940245b">D3OFFSET_n40C</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">/* Compute HPOSC polynomial coefficients */</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a>(hposcParm.<a class="code" href="structhposc__param__t.html#a2ef374987853f9083ec982a96a77f674">pu0c</a>, hposcParm.<a class="code" href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">pu0b</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], 3, pu0);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a>(hposcParm.<a class="code" href="structhposc__param__t.html#ae8f2cd6c4d6aac6982aadcc9a685087d">pu1c</a>, hposcParm.<a class="code" href="structhposc__param__t.html#a1dadcf06d54f6f1db94ea3e691094827">pu1b</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], 3, pu1);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a>(hposcParm.<a class="code" href="structhposc__param__t.html#a76bbdda081d3888dafec1cb6871d66f3">pu2c</a>, hposcParm.<a class="code" href="structhposc__param__t.html#aaea7325ad059866c20630de1d879388b">pu2b</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], 3, pu2);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3">findHposcCoefficients</a>(&amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[0], pu0, pu1, pu2, &amp;hposcParm);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
<div class="ttc" id="structhposc__param__t_html_aaea7325ad059866c20630de1d879388b"><div class="ttname"><a href="structhposc__param__t.html#aaea7325ad059866c20630de1d879388b">hposc_param_t::pu2b</a></div><div class="ttdeci">uint8_t pu2b[4]</div><div class="ttdef"><b>Definition:</b> osc.c:366</div></div>
<div class="ttc" id="structhposc__param__t_html_a2ef374987853f9083ec982a96a77f674"><div class="ttname"><a href="structhposc__param__t.html#a2ef374987853f9083ec982a96a77f674">hposc_param_t::pu0c</a></div><div class="ttdeci">int64_t pu0c[4]</div><div class="ttdef"><b>Definition:</b> osc.c:367</div></div>
<div class="ttc" id="osc_8c_html_a789a842493cac3a154a1f58b5940245b"><div class="ttname"><a href="osc_8c.html#a789a842493cac3a154a1f58b5940245b">D3OFFSET_n40C</a></div><div class="ttdeci">#define D3OFFSET_n40C</div><div class="ttdef"><b>Definition:</b> osc.c:345</div></div>
<div class="ttc" id="osc_8c_html_ad07ae489bb66d205fc64e9ac83d6306d"><div class="ttname"><a href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a></div><div class="ttdeci">static void readTempAndFreq(uint32_t regAddr, int32_t *pTemp, int32_t *pdFreq, int32_t deltaFreq)</div><div class="ttdef"><b>Definition:</b> osc.c:481</div></div>
<div class="ttc" id="structhposc__insertions__t_html"><div class="ttname"><a href="structhposc__insertions__t.html">hposc_insertions_t</a></div><div class="ttdef"><b>Definition:</b> osc.c:356</div></div>
<div class="ttc" id="osc_8c_html_ae057d50f2181d3a033c4e006315b9a17"><div class="ttname"><a href="osc_8c.html#ae057d50f2181d3a033c4e006315b9a17">D2OFFSET_85C</a></div><div class="ttdeci">#define D2OFFSET_85C</div><div class="ttdef"><b>Definition:</b> osc.c:344</div></div>
<div class="ttc" id="structhposc__param__t_html_ae8f2cd6c4d6aac6982aadcc9a685087d"><div class="ttname"><a href="structhposc__param__t.html#ae8f2cd6c4d6aac6982aadcc9a685087d">hposc_param_t::pu1c</a></div><div class="ttdeci">int64_t pu1c[4]</div><div class="ttdef"><b>Definition:</b> osc.c:368</div></div>
<div class="ttc" id="osc_8c_html_a7309c79535cc459a5a2b5a684adcd4a3"><div class="ttname"><a href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3">findHposcCoefficients</a></div><div class="ttdeci">static void findHposcCoefficients(int32_t *pInput, int64_t *col0, int64_t *col1, int64_t *col2, hposc_param_t *pParam)</div><div class="ttdef"><b>Definition:</b> osc.c:408</div></div>
<div class="ttc" id="osc_8c_html_a65f9abc588f14b672c3ecfa0dcc8783f"><div class="ttname"><a href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a></div><div class="ttdeci">static void findHposcPc(int64_t *pCoeff, uint8_t *pBits, int32_t *pTemp, uint8_t nTemp, int64_t *pOutput)</div><div class="ttdef"><b>Definition:</b> osc.c:464</div></div>
<div class="ttc" id="structhposc__insertions__t_html_af82d605ca8ade25ac5c333a57626c0dc"><div class="ttname"><a href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">hposc_insertions_t::dFreq</a></div><div class="ttdeci">int32_t dFreq[3]</div><div class="ttdef"><b>Definition:</b> osc.c:359</div></div>
<div class="ttc" id="structhposc__param__t_html_a5ecbb1a1411850b126d059513129667a"><div class="ttname"><a href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">hposc_param_t::pu0b</a></div><div class="ttdeci">uint8_t pu0b[4]</div><div class="ttdef"><b>Definition:</b> osc.c:364</div></div>
<div class="ttc" id="structhposc__param__t_html_a1dadcf06d54f6f1db94ea3e691094827"><div class="ttname"><a href="structhposc__param__t.html#a1dadcf06d54f6f1db94ea3e691094827">hposc_param_t::pu1b</a></div><div class="ttdeci">uint8_t pu1b[4]</div><div class="ttdef"><b>Definition:</b> osc.c:365</div></div>
<div class="ttc" id="structhposc__param__t_html"><div class="ttname"><a href="structhposc__param__t.html">hposc_param_t</a></div><div class="ttdef"><b>Definition:</b> osc.c:362</div></div>
<div class="ttc" id="structhposc__param__t_html_a76bbdda081d3888dafec1cb6871d66f3"><div class="ttname"><a href="structhposc__param__t.html#a76bbdda081d3888dafec1cb6871d66f3">hposc_param_t::pu2c</a></div><div class="ttdeci">int64_t pu2c[4]</div><div class="ttdef"><b>Definition:</b> osc.c:369</div></div>
<div class="ttc" id="structhposc__insertions__t_html_a58f0f42fdb09c367fcb7fcf16c2a97f9"><div class="ttname"><a href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">hposc_insertions_t::temp</a></div><div class="ttdeci">int32_t temp[3]</div><div class="ttdef"><b>Definition:</b> osc.c:358</div></div>
<div class="ttc" id="osc_8c_html_a5dbce9b2f44286bc3d8c99ba8adf5c2f"><div class="ttname"><a href="osc_8c.html#a5dbce9b2f44286bc3d8c99ba8adf5c2f">D1OFFSET_25C</a></div><div class="ttdeci">#define D1OFFSET_25C</div><div class="ttdef"><b>Definition:</b> osc.c:343</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga4ee930c5e3e44545e4b242cb819548ed_cgraph.png" border="0" usemap="#group__osc__api_ga4ee930c5e3e44545e4b242cb819548ed_cgraph" alt=""/></div>
<map name="group__osc__api_ga4ee930c5e3e44545e4b242cb819548ed_cgraph" id="group__osc__api_ga4ee930c5e3e44545e4b242cb819548ed_cgraph">
<area shape="rect" id="node2" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d" title="readTempAndFreq" alt="" coords="273,5,401,32"/>
<area shape="rect" id="node3" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f" title="findHposcPc" alt="" coords="290,56,385,83"/>
<area shape="rect" id="node4" href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3" title="findHposcCoefficients" alt="" coords="264,107,411,133"/>
<area shape="rect" id="node5" href="osc_8c.html#a27f042117ef7827fdddcc83fed89dcf9" title="findDenominator" alt="" coords="459,56,573,83"/>
<area shape="rect" id="node6" href="osc_8c.html#ad6f165e3d890dae06b1c4619d202cab7" title="multiplyColumns" alt="" coords="621,81,740,108"/>
<area shape="rect" id="node7" href="osc_8c.html#ae3080286e6fc927ebc788ddf47aeeb87" title="findNumerator" alt="" coords="465,157,567,184"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gabf0f1134cc52278702eb990958316701"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSC_HPOSCInitializeSingleInsertionFreqOffsParams </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>measFieldAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Special HPOSC initialization function for single temperature compensation. </p>
<p>Used when a single temperature offset measurement is available. This is espesially designed to get a better crystal performance (SW TCXO) on the SiP module but can also be usful to get better crystal performance over the entire temperature range on a standard design as well.</p>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga4ee930c5e3e44545e4b242cb819548ed" title="HPOSC initialization function. Must always be called before using HPOSC. ">OSC_HPOSCInitializeFrequencyOffsetParameters()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">/* Initialize HPOSC internal parameter */</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="structhposc__insertions__t.html">hposc_insertions_t</a>  hposcMeas;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    int64_t pu0;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="structhposc__param__t.html">hposc_param_t</a> hposcParm =</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="comment">/* Coefficients for SW-TCXO */</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        .<a class="code" href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">pu0b</a> = {44, 44, 27, 20},</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        .pu0c = {7322, -5021, -209, -104861}</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    };</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">/* Retrieve insertions from FCFG */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a>( measFieldAddress, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[0], 0);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">/* Compute HPOSC polynomial coefficients */</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a>(hposcParm.<a class="code" href="structhposc__param__t.html#a2ef374987853f9083ec982a96a77f674">pu0c</a>, hposcParm.<a class="code" href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">pu0b</a>, &amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">temp</a>[0], 1, &amp;pu0);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3">findHposcCoefficients</a>(&amp;hposcMeas.<a class="code" href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">dFreq</a>[0], &amp;pu0, NULL, NULL, &amp;hposcParm);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div>
<div class="ttc" id="structhposc__param__t_html_a2ef374987853f9083ec982a96a77f674"><div class="ttname"><a href="structhposc__param__t.html#a2ef374987853f9083ec982a96a77f674">hposc_param_t::pu0c</a></div><div class="ttdeci">int64_t pu0c[4]</div><div class="ttdef"><b>Definition:</b> osc.c:367</div></div>
<div class="ttc" id="osc_8c_html_ad07ae489bb66d205fc64e9ac83d6306d"><div class="ttname"><a href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d">readTempAndFreq</a></div><div class="ttdeci">static void readTempAndFreq(uint32_t regAddr, int32_t *pTemp, int32_t *pdFreq, int32_t deltaFreq)</div><div class="ttdef"><b>Definition:</b> osc.c:481</div></div>
<div class="ttc" id="structhposc__insertions__t_html"><div class="ttname"><a href="structhposc__insertions__t.html">hposc_insertions_t</a></div><div class="ttdef"><b>Definition:</b> osc.c:356</div></div>
<div class="ttc" id="osc_8c_html_a7309c79535cc459a5a2b5a684adcd4a3"><div class="ttname"><a href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3">findHposcCoefficients</a></div><div class="ttdeci">static void findHposcCoefficients(int32_t *pInput, int64_t *col0, int64_t *col1, int64_t *col2, hposc_param_t *pParam)</div><div class="ttdef"><b>Definition:</b> osc.c:408</div></div>
<div class="ttc" id="osc_8c_html_a65f9abc588f14b672c3ecfa0dcc8783f"><div class="ttname"><a href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f">findHposcPc</a></div><div class="ttdeci">static void findHposcPc(int64_t *pCoeff, uint8_t *pBits, int32_t *pTemp, uint8_t nTemp, int64_t *pOutput)</div><div class="ttdef"><b>Definition:</b> osc.c:464</div></div>
<div class="ttc" id="structhposc__insertions__t_html_af82d605ca8ade25ac5c333a57626c0dc"><div class="ttname"><a href="structhposc__insertions__t.html#af82d605ca8ade25ac5c333a57626c0dc">hposc_insertions_t::dFreq</a></div><div class="ttdeci">int32_t dFreq[3]</div><div class="ttdef"><b>Definition:</b> osc.c:359</div></div>
<div class="ttc" id="structhposc__param__t_html_a5ecbb1a1411850b126d059513129667a"><div class="ttname"><a href="structhposc__param__t.html#a5ecbb1a1411850b126d059513129667a">hposc_param_t::pu0b</a></div><div class="ttdeci">uint8_t pu0b[4]</div><div class="ttdef"><b>Definition:</b> osc.c:364</div></div>
<div class="ttc" id="structhposc__param__t_html"><div class="ttname"><a href="structhposc__param__t.html">hposc_param_t</a></div><div class="ttdef"><b>Definition:</b> osc.c:362</div></div>
<div class="ttc" id="structhposc__insertions__t_html_a58f0f42fdb09c367fcb7fcf16c2a97f9"><div class="ttname"><a href="structhposc__insertions__t.html#a58f0f42fdb09c367fcb7fcf16c2a97f9">hposc_insertions_t::temp</a></div><div class="ttdeci">int32_t temp[3]</div><div class="ttdef"><b>Definition:</b> osc.c:358</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_gabf0f1134cc52278702eb990958316701_cgraph.png" border="0" usemap="#group__osc__api_gabf0f1134cc52278702eb990958316701_cgraph" alt=""/></div>
<map name="group__osc__api_gabf0f1134cc52278702eb990958316701_cgraph" id="group__osc__api_gabf0f1134cc52278702eb990958316701_cgraph">
<area shape="rect" id="node2" href="osc_8c.html#ad07ae489bb66d205fc64e9ac83d6306d" title="readTempAndFreq" alt="" coords="249,5,377,32"/>
<area shape="rect" id="node3" href="osc_8c.html#a65f9abc588f14b672c3ecfa0dcc8783f" title="findHposcPc" alt="" coords="266,56,361,83"/>
<area shape="rect" id="node4" href="osc_8c.html#a7309c79535cc459a5a2b5a684adcd4a3" title="findHposcCoefficients" alt="" coords="240,107,387,133"/>
<area shape="rect" id="node5" href="osc_8c.html#a27f042117ef7827fdddcc83fed89dcf9" title="findDenominator" alt="" coords="435,56,549,83"/>
<area shape="rect" id="node6" href="osc_8c.html#ad6f165e3d890dae06b1c4619d202cab7" title="multiplyColumns" alt="" coords="597,81,716,108"/>
<area shape="rect" id="node7" href="osc_8c.html#ae3080286e6fc927ebc788ddf47aeeb87" title="findNumerator" alt="" coords="441,157,543,184"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5d974140ed2a25ffbb5dd851c63cbb8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t OSC_HPOSCRelativeFrequencyOffsetGet </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>tempDegC</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the temperature dependent relative frequency offset of HPOSC. </p>
<p>The HPOSC (High Precision Oscillator) frequency will vary slightly with chip temperature. The frequency offset from the nominal value can be predicted based on second order linear interpolation using coefficients measured in chip production and stored as factory configuration parameters.</p>
<p>This function calculates the relative frequency offset, defined as: </p><pre>
    F_HPOSC = F_nom * (1 + d/(2^22))
</pre><p> where</p><ul>
<li>F_HPOSC is the current HPOSC frequency.</li>
<li>F_nom is the nominal oscillator frequency, assumed to be 48.000 MHz.</li>
<li>d is the relative frequency offset (the value returned).</li>
</ul>
<p>By knowing the relative frequency offset it is then possible to compensate any timing related values accordingly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tempDegC</td><td>is the chip temperature in degrees Celsius. Use the function <a class="el" href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57">AONBatMonTemperatureGetDegC()</a> to get current chip temperature.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the relative frequency offset parameter d.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga4117910cda25374e78214e2b632102a7" title="Converts the relative frequency offset of HPOSC to the RF Core parameter format. ">OSC_HPOSCRelativeFrequencyOffsetToRFCoreFormatConvert()</a>, <a class="el" href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57" title="Get the current temperature measurement as a signed value in Deg Celsius. ">AONBatMonTemperatureGetDegC()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;{</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// Estimate HPOSC frequency offset, using temperature and curve fitting parameters</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">// Now we can find the HPOSC freq offset, given as a signed variable d, expressed by:</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">//    F_HPOSC = F_nom * (1 + d/(2^22))    , where: F_HPOSC = HPOSC frequency</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">//                                                 F_nom = nominal clock source frequency (e.g. 48.000 MHz)</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">//                                                 d = describes relative freq offset</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// We can estimate the d variable, using temperature compensation parameters:</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">//    d = P[3]*(t - T0)^3 + P[2]*(t - T0)^2 + P[1]*(t - T0) + P[0], where: P0,P1,P2,P3 are curve fitting parameters</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">//                                                                  t = current temperature (from temp sensor) in deg C</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">//                                                                  T0 = 27 deg C (fixed temperature constant)</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    int32_t d,t1,t2,t3;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    t1 = tempDegC - 27;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    t2 = t1 * t1;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    t3 = t2 * t1;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    d =  ((((int64_t)<a class="code" href="osc_8c.html#aa4c990e64f14c002899c746c181a28b0">_hposcCoeffs</a>[3]*t3 + (int64_t)<a class="code" href="osc_8c.html#aa4c990e64f14c002899c746c181a28b0">_hposcCoeffs</a>[2]*t2 + (int64_t)<a class="code" href="osc_8c.html#aa4c990e64f14c002899c746c181a28b0">_hposcCoeffs</a>[1]*t1) &gt;&gt; <a class="code" href="osc_8c.html#a3f95363a7273f8867172624fb3c70879">HPOSC_COEFF0_SHIFT</a>) +</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            (int64_t)<a class="code" href="osc_8c.html#aa4c990e64f14c002899c746c181a28b0">_hposcCoeffs</a>[0]) &gt;&gt; <a class="code" href="osc_8c.html#a6edfd7852c31296c38beeb02c0533322">HPOSC_COEFF0_BITS</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> ( d );</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;}</div>
<div class="ttc" id="osc_8c_html_a3f95363a7273f8867172624fb3c70879"><div class="ttname"><a href="osc_8c.html#a3f95363a7273f8867172624fb3c70879">HPOSC_COEFF0_SHIFT</a></div><div class="ttdeci">#define HPOSC_COEFF0_SHIFT</div><div class="ttdef"><b>Definition:</b> osc.c:350</div></div>
<div class="ttc" id="osc_8c_html_a6edfd7852c31296c38beeb02c0533322"><div class="ttname"><a href="osc_8c.html#a6edfd7852c31296c38beeb02c0533322">HPOSC_COEFF0_BITS</a></div><div class="ttdeci">#define HPOSC_COEFF0_BITS</div><div class="ttdef"><b>Definition:</b> osc.c:348</div></div>
<div class="ttc" id="osc_8c_html_aa4c990e64f14c002899c746c181a28b0"><div class="ttname"><a href="osc_8c.html#aa4c990e64f14c002899c746c181a28b0">_hposcCoeffs</a></div><div class="ttdeci">int32_t _hposcCoeffs[4]</div><div class="ttdef"><b>Definition:</b> osc.c:354</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4117910cda25374e78214e2b632102a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t OSC_HPOSCRelativeFrequencyOffsetToRFCoreFormatConvert </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>HPOSC_RelFreqOffset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts the relative frequency offset of HPOSC to the RF Core parameter format. </p>
<p>The HPOSC (High Precision Oscillator) clock is used by the RF Core. To compensate for a frequency offset in the frequency of the clock source, a frequency offset parameter can be provided as part of the radio configuration override setting list to enable compensation of the RF synthesizer frequency, symbol timing, and radio timer to still achieve correct frequencies.</p>
<p>The RF Core takes a relative frequency offset parameter defined differently compared to the relative frequency offset parameter returned from function <a class="el" href="group__osc__api.html#ga5d974140ed2a25ffbb5dd851c63cbb8d">OSC_HPOSCRelativeFrequencyOffsetGet()</a> and thus needs to be converted: </p><pre>
    F_nom = F_HPOSC * (1 + RfCoreRelFreqOffset/(2^22))
</pre><p> where</p><ul>
<li>F_nom is the nominal oscillator frequency, assumed to be 48.000 MHz.</li>
<li>F_HPOSC is the current HPOSC frequency.</li>
<li>RfCoreRelFreqOffset is the relative frequency offset in the "RF Core" format (the value returned).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">HPOSC_RelFreqOffset</td><td>is the relative frequency offset parameter d returned from <a class="el" href="group__osc__api.html#ga5d974140ed2a25ffbb5dd851c63cbb8d">OSC_HPOSCRelativeFrequencyOffsetGet()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the relative frequency offset in RF Core format.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga5d974140ed2a25ffbb5dd851c63cbb8d" title="Calculate the temperature dependent relative frequency offset of HPOSC. ">OSC_HPOSCRelativeFrequencyOffsetGet()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;{</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="comment">// The input argument, hereby referred to simply as &quot;d&quot;, describes the frequency offset</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="comment">// of the HPOSC relative to the nominal frequency in this way:</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="comment">//    F_HPOSC = F_nom * (1 + d/(2^22))</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="comment">// But for use by the radio, to compensate the frequency error, we need to find the</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <span class="comment">// frequency offset &quot;rfcFreqOffset&quot; defined in the following format:</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="comment">//    F_nom = F_HPOSC * (1 + rfCoreFreqOffset/(2^22))</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <span class="comment">// To derive &quot;rfCoreFreqOffset&quot; from &quot;d&quot; we combine the two above equations and get:</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <span class="comment">//    (1 + rfCoreFreqOffset/(2^22)) = (1 + d/(2^22))^-1</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="comment">// Which can be rewritten into:</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="comment">//    rfCoreFreqOffset = -d*(2^22) / ((2^22) + d)</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="comment">//               = -d * [ 1 / (1 + d/(2^22)) ]</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <span class="comment">// To avoid doing a 64-bit division due to the (1 + d/(2^22))^-1 expression,</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="comment">// we can use Taylor series (Maclaurin series) to approximate it:</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="comment">//       1 / (1 - x) ~= 1 + x + x^2 + x^3 + x^4 + ... etc      (Maclaurin series)</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="comment">// In our case, we have x = - d/(2^22), and we only include up to the first</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="comment">// order term of the series, as the second order term ((d^2)/(2^44)) is very small:</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="comment">//       freqError ~= -d + d^2/(2^22)   (+ small approximation error)</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="comment">//</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="comment">// The approximation error is negligible for our use.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   int32_t rfCoreFreqOffset = -HPOSC_RelFreqOffset + (( HPOSC_RelFreqOffset * HPOSC_RelFreqOffset ) &gt;&gt; 22 );</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">return</span> ( rfCoreFreqOffset );</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga77ce1fdfe6f45ea25147b5282f3a2f08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSC_HPOSCRtcCompensate </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>relFreqOffset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compensate the RTC increment based on the relative frequency offset of HPOSC. </p>
<p>The HPOSC (High Precision Oscillator) frequency will vary slightly with chip temperature. This variation forces the RTC increment to be compensated if SCLK_LF is configured to be derived from the HF clock of HPOSC. This function must only be called if SCLK_LF is configured to be derived from the HF clock of HPOSC. The status of this configuration can be determined by calling the <a class="el" href="group__osc__api.html#ga48e5359a19bd95b63dfab58bf67c5ec6">OSC_IsHPOSCEnabledWithHfDerivedLfClock()</a> function.</p>
<p>This function first calculates the HPOSC frequency, defined as: </p><pre>
    F_HPOSC = F_nom * (1 + d/(2^22))
</pre><p> where</p><ul>
<li>F_HPOSC is the current HPOSC frequency.</li>
<li>F_nom is the nominal oscillator frequency, assumed to be 48.000 MHz.</li>
<li>d is the relative frequency offset given by the input argument relFreqOffset. Then the SCLK_LF frequency is calculated, defined as: <pre>
    F_SCLK_LF = F_HPOSC / 1536
</pre> Then the RTC increment SUBSECINC is calculated, defined as; <pre>
    SUBSECINC = (2^38) / F_SCLK_LF
</pre> Finally the RTC module is updated with the calculated SUBSECINC value.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">relFreqOffset</td><td>is the relative frequency offset parameter d returned from <a class="el" href="group__osc__api.html#ga5d974140ed2a25ffbb5dd851c63cbb8d">OSC_HPOSCRelativeFrequencyOffsetGet()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<div class="fragment"><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;{</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    uint32_t rtcSubSecInc;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    uint32_t lfClkFrequency;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    uint32_t hfFreq;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    int64_t  calcFactor;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">// Calculate SCLK_HF frequency, defined as:</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// hfFreq = 48000000 * (1 + relFreqOffset/(2^22))</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span>( relFreqOffset &gt;= 0 )</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        calcFactor = ( ( 48000000 * (int64_t)relFreqOffset ) + 0x200000 ) / 0x400000;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        calcFactor = ( ( 48000000 * (int64_t)relFreqOffset ) - 0x200000 ) / 0x400000;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    hfFreq = 48000000 + calcFactor;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="comment">// Calculate SCLK_LF frequency, defined as SCLK_LF_FREQ = SCLK_HF_FREQ / 1536</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    lfClkFrequency = ( hfFreq + 768 ) / 1536;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// Calculate SUBSECINC, defined as: SUBSECINC = 2^38 / SCLK_LF_FREQ</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    rtcSubSecInc = 0x4000000000 / lfClkFrequency;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="comment">/* Update SUBSECINC value */</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="group__setup__rom__api.html#gaaee7ab99f1f8e288786f0f98b0030ac8">SetupSetAonRtcSubSecInc</a>(rtcSubSecInc);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div>
<div class="ttc" id="group__setup__rom__api_html_gaaee7ab99f1f8e288786f0f98b0030ac8"><div class="ttname"><a href="group__setup__rom__api.html#gaaee7ab99f1f8e288786f0f98b0030ac8">SetupSetAonRtcSubSecInc</a></div><div class="ttdeci">void SetupSetAonRtcSubSecInc(uint32_t subSecInc)</div><div class="ttdoc">Doing the tricky stuff needed to enter new RTCSUBSECINC value. </div><div class="ttdef"><b>Definition:</b> setup_rom.c:929</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga77ce1fdfe6f45ea25147b5282f3a2f08_cgraph.png" border="0" usemap="#group__osc__api_ga77ce1fdfe6f45ea25147b5282f3a2f08_cgraph" alt=""/></div>
<map name="group__osc__api_ga77ce1fdfe6f45ea25147b5282f3a2f08_cgraph" id="group__osc__api_ga77ce1fdfe6f45ea25147b5282f3a2f08_cgraph">
<area shape="rect" id="node2" href="group__setup__rom__api.html#gaaee7ab99f1f8e288786f0f98b0030ac8" title="Doing the tricky stuff needed to enter new RTCSUBSECINC value. " alt="" coords="249,5,432,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gab87ed4367df0895082a9baf6692f85e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool OSC_IsHPOSCEnabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Identifies if HPOSC is enabled. </p>
<p>This function checks if the device supports HPOSC and that HPOSC is selected as HF oscillator for use when the radio is active.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns status of HPOSC functionality:<ul>
<li><code>true</code> : HPOSC is enabled.</li>
<li><code>false</code> : HPOSC is not enabled. </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordtype">bool</span> enabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span>((( HWREG(<a href=../register_descriptions/CPU_MMAP/CCFG.html target="_blank">CCFG_BASE</a> + <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF target="_blank">CCFG_O_MODE_CONF</a>) &amp; <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_XOSC_FREQ target="_blank">CCFG_MODE_CONF_XOSC_FREQ_M</a>) == <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_XOSC_FREQ target="_blank">CCFG_MODE_CONF_XOSC_FREQ_HPOSC</a>) &amp;&amp;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;       (( HWREG(<a href=../register_descriptions/CPU_MMAP/FCFG1.html target="_blank">FCFG1_BASE</a> + <a href=../register_descriptions/CPU_MMAP/FCFG1.html#OSC_CONF target="_blank">FCFG1_O_OSC_CONF</a>) &amp; <a href=../register_descriptions/CPU_MMAP/FCFG1.html#OSC_CONF_HPOSC_OPTION target="_blank">FCFG1_OSC_CONF_HPOSC_OPTION</a>) == 0))</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        enabled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> (enabled);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga48e5359a19bd95b63dfab58bf67c5ec6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool OSC_IsHPOSCEnabledWithHfDerivedLfClock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Identifies if HPOSC is enabled and that SCLK_LF is derived from XOSC_HF. </p>
<p>This function checks if the device supports HPOSC and that HPOSC is selected as HF oscillator for use when the radio is active and also that SCLK_LF is derived from XOSC_HF.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns status of HPOSC and SCLK_LF configuration:<ul>
<li><code>true</code> : HPOSC is enabled and SCLK_LF is derived from XOSC_HF.</li>
<li><code>false</code> : Either HPOSC not enabled or SCLK_LF is not derived from XOSC_HF. </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordtype">bool</span> enabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// Check configuration by reading lower half of the 32-bit CTL0 register</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    uint16_t regVal = HWREGH(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a> + <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span>( ( ( regVal &amp; <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_LF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_LF_SRC_SEL_M</a> ) == <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_LF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_LF_SRC_SEL_XOSCHFDLF</a> ) &amp;&amp;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        ( ( regVal &amp; <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_HPOSC_MODE_EN target="_blank">DDI_0_OSC_CTL0_HPOSC_MODE_EN_M</a>   ) == <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_HPOSC_MODE_EN target="_blank">DDI_0_OSC_CTL0_HPOSC_MODE_EN</a>             )   )</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            enabled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span> (enabled);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga8c7823a2f4fc61456f576bf472ed2308"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void OSCClockLossEventDisable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disables OSC clock loss event detection. </p>
<p>Disabling the OSC clock loss event does also clear the clock loss event flag.</p>
<dl class="section note"><dt>Note</dt><dd>OSC clock loss event must be disabled before SCLK_LF clock source is changed (by calling <a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>) and remain disabled until the change is confirmed (by calling <a class="el" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet()</a>).</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga466c89b836c6b60214fec5b5e8e0719d">OSCClockLossEventEnable()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4">DDI16BitfieldWrite</a>( <a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a>,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_CLK_LOSS_EN target="_blank">DDI_0_OSC_CTL0_CLK_LOSS_EN_M</a>,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_CLK_LOSS_EN target="_blank">DDI_0_OSC_CTL0_CLK_LOSS_EN_S</a>, 0 );</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="ttc" id="group__ddi__api_html_ga492326c095c70621a247fe02a2cb09e4"><div class="ttname"><a href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4">DDI16BitfieldWrite</a></div><div class="ttdeci">void DDI16BitfieldWrite(uint32_t ui32Base, uint32_t ui32Reg, uint32_t ui32Mask, uint32_t ui32Shift, uint16_t ui32Data)</div><div class="ttdoc">Write a bit field via the DDI using 16-bit maskable write. </div><div class="ttdef"><b>Definition:</b> ddi.c:117</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga8c7823a2f4fc61456f576bf472ed2308_cgraph.png" border="0" usemap="#group__osc__api_ga8c7823a2f4fc61456f576bf472ed2308_cgraph" alt=""/></div>
<map name="group__osc__api_ga8c7823a2f4fc61456f576bf472ed2308_cgraph" id="group__osc__api_ga8c7823a2f4fc61456f576bf472ed2308_cgraph">
<area shape="rect" id="node2" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4" title="Write a bit field via the DDI using 16&#45;bit maskable write. " alt="" coords="240,5,367,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga466c89b836c6b60214fec5b5e8e0719d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void OSCClockLossEventEnable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enables OSC clock loss event detection. </p>
<p>Enables the clock loss event flag to be raised if a clock loss is detected.</p>
<dl class="section note"><dt>Note</dt><dd>OSC clock loss event must be disabled before SCLK_LF clock source is changed (by calling <a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>) and remain disabled until the change is confirmed (by calling <a class="el" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet()</a>).</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga8c7823a2f4fc61456f576bf472ed2308">OSCClockLossEventDisable()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4">DDI16BitfieldWrite</a>( <a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a>,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_CLK_LOSS_EN target="_blank">DDI_0_OSC_CTL0_CLK_LOSS_EN_M</a>,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_CLK_LOSS_EN target="_blank">DDI_0_OSC_CTL0_CLK_LOSS_EN_S</a>, 1 );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="ttc" id="group__ddi__api_html_ga492326c095c70621a247fe02a2cb09e4"><div class="ttname"><a href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4">DDI16BitfieldWrite</a></div><div class="ttdeci">void DDI16BitfieldWrite(uint32_t ui32Base, uint32_t ui32Reg, uint32_t ui32Mask, uint32_t ui32Shift, uint16_t ui32Data)</div><div class="ttdoc">Write a bit field via the DDI using 16-bit maskable write. </div><div class="ttdef"><b>Definition:</b> ddi.c:117</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga466c89b836c6b60214fec5b5e8e0719d_cgraph.png" border="0" usemap="#group__osc__api_ga466c89b836c6b60214fec5b5e8e0719d_cgraph" alt=""/></div>
<map name="group__osc__api_ga466c89b836c6b60214fec5b5e8e0719d_cgraph" id="group__osc__api_ga466c89b836c6b60214fec5b5e8e0719d_cgraph">
<area shape="rect" id="node2" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4" title="Write a bit field via the DDI using 16&#45;bit maskable write. " alt="" coords="236,5,363,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga279bd3a34548bd4c5e2fc6939f7be228"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t OSCClockSourceGet </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32SrcClk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the source clock settings. </p>
<p>Use this function to get the oscillator source for one of the system source clocks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32SrcClk</td><td>is the source clock to check.<ul>
<li><a class="el" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a></li>
<li><a class="el" href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the type of oscillator that drives the clock source.<ul>
<li><a class="el" href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a></li>
<li><a class="el" href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a></li>
<li><a class="el" href="group__osc__api.html#ga77f1adccd50f1b219d9657ba2ac7dd9b">OSC_RCOSC_LF</a></li>
<li><a class="el" href="group__osc__api.html#ga6502b0b712473f2ec7a4112cda0725bb">OSC_XOSC_LF</a></li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>, <a class="el" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch()</a> </dd></dl>

<p>Referenced by <a class="el" href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4">OSCHF_AttemptToSwitchToXosc()</a>, <a class="el" href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c">OSCHF_SwitchToRcOscTurnOffXosc()</a>, and <a class="el" href="group__setup__rom__api.html#ga8145bf9a87ccdba3bfc95e83046e1db5">SetupAfterColdResetWakeupFromShutDownCfg3()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    uint32_t ui32ClockSource;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Check the arguments.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a>((ui32SrcClk &amp; <a class="code" href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a>) ||</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;           (ui32SrcClk &amp; <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a>));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// Return the source for the selected clock.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span>(ui32SrcClk == OSC_SRC_CLK_LF)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        ui32ClockSource = <a class="code" href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4">DDI16BitfieldRead</a>(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0 target="_blank">DDI_0_OSC_O_STAT0</a>,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                            <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0_SCLK_LF_SRC target="_blank">DDI_0_OSC_STAT0_SCLK_LF_SRC_M</a>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                            <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0_SCLK_LF_SRC target="_blank">DDI_0_OSC_STAT0_SCLK_LF_SRC_S</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        ui32ClockSource = <a class="code" href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4">DDI16BitfieldRead</a>(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0 target="_blank">DDI_0_OSC_O_STAT0</a>,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                            <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0_SCLK_HF_SRC target="_blank">DDI_0_OSC_STAT0_SCLK_HF_SRC_M</a>,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                            <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0_SCLK_HF_SRC target="_blank">DDI_0_OSC_STAT0_SCLK_HF_SRC_S</a>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> (ui32ClockSource);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="ttc" id="group__osc__api_html_gac53cc71494c69f6f486be9b3b0566b83"><div class="ttname"><a href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a></div><div class="ttdeci">#define OSC_SRC_CLK_HF</div><div class="ttdef"><b>Definition:</b> osc.h:120</div></div>
<div class="ttc" id="group__osc__api_html_gac57298ac9008f605f9b2c70609790bab"><div class="ttname"><a href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a></div><div class="ttdeci">#define OSC_SRC_CLK_LF</div><div class="ttdef"><b>Definition:</b> osc.h:121</div></div>
<div class="ttc" id="group__ddi__api_html_gac86ccf0590b9dbdc88eb1a6c856c78a4"><div class="ttname"><a href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4">DDI16BitfieldRead</a></div><div class="ttdeci">uint16_t DDI16BitfieldRead(uint32_t ui32Base, uint32_t ui32Reg, uint32_t ui32Mask, uint32_t ui32Shift)</div><div class="ttdoc">Read a bit field via the DDI using 16-bit read. </div><div class="ttdef"><b>Definition:</b> ddi.c:185</div></div>
<div class="ttc" id="group__debug__api_html_ga28301f76c53b643912da7c538f74e2c6"><div class="ttname"><a href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a></div><div class="ttdeci">#define ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> debug.h:73</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga279bd3a34548bd4c5e2fc6939f7be228_cgraph.png" border="0" usemap="#group__osc__api_ga279bd3a34548bd4c5e2fc6939f7be228_cgraph" alt=""/></div>
<map name="group__osc__api_ga279bd3a34548bd4c5e2fc6939f7be228_cgraph" id="group__osc__api_ga279bd3a34548bd4c5e2fc6939f7be228_cgraph">
<area shape="rect" id="node2" href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4" title="Read a bit field via the DDI using 16&#45;bit read. " alt="" coords="199,5,325,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga37a02687fbd8680396550f682a7f046f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSCClockSourceSet </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32SrcClk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Osc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the oscillator input to the a source clock. </p>
<p>Use this function to set the oscillator source for one or more of the system source clocks.</p>
<p>When selecting the high frequency clock source (OSC_SRC_CLK_HF), this function will not do the actual switch. Enabling the high frequency XTAL can take several hundred micro seconds, so the actual switch is done in a separate function, <a class="el" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch()</a>, leaving System CPU free to perform other tasks as the XTAL starts up.</p>
<dl class="section note"><dt>Note</dt><dd>The High Frequency (<a class="el" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a>) can only be derived from the high frequency oscillator. The Low Frequency source clock (<a class="el" href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a>) can be derived from all 4 oscillators.</dd>
<dd>
If enabling <a class="el" href="group__osc__api.html#ga6502b0b712473f2ec7a4112cda0725bb">OSC_XOSC_LF</a> it is not safe to go to powerdown/shutdown until the LF clock is running which can be checked using <a class="el" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet()</a>.</dd>
<dd>
Clock loss reset generation must be disabled before SCLK_LF (<a class="el" href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a>) clock source is changed and remain disabled until the change is confirmed.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32SrcClk</td><td>is the source clocks to configure.<ul>
<li><a class="el" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a></li>
<li><a class="el" href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a> </li>
</ul>
</td></tr>
    <tr><td class="paramname">ui32Osc</td><td>is the oscillator that drives the source clock.<ul>
<li><a class="el" href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a></li>
<li><a class="el" href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a></li>
<li><a class="el" href="group__osc__api.html#ga77f1adccd50f1b219d9657ba2ac7dd9b">OSC_RCOSC_LF</a> (only when ui32SrcClk is <a class="el" href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a>)</li>
<li><a class="el" href="group__osc__api.html#ga6502b0b712473f2ec7a4112cda0725bb">OSC_XOSC_LF</a> (only when ui32SrcClk is <a class="el" href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a>)</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet()</a>, <a class="el" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

<p>Referenced by <a class="el" href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c">OSCHF_SwitchToRcOscTurnOffXosc()</a>, <a class="el" href="group__osc__api.html#gaee5a511c4ca70e8eb66f4a6252488506">OSCHF_TurnOnXosc()</a>, and <a class="el" href="group__setup__rom__api.html#ga8145bf9a87ccdba3bfc95e83046e1db5">SetupAfterColdResetWakeupFromShutDownCfg3()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Check the arguments.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a>((ui32SrcClk &amp; <a class="code" href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a>) ||</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;           (ui32SrcClk &amp; <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a>));</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a>((ui32Osc == <a class="code" href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a>) ||</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;           (ui32Osc == <a class="code" href="group__osc__api.html#ga77f1adccd50f1b219d9657ba2ac7dd9b">OSC_RCOSC_LF</a>) ||</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;           (ui32Osc == <a class="code" href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a>) ||</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;           (ui32Osc == <a class="code" href="group__osc__api.html#ga6502b0b712473f2ec7a4112cda0725bb">OSC_XOSC_LF</a>));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// Request the high frequency source clock (using 24 MHz XTAL)</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span>(ui32SrcClk &amp; <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a>)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="comment">// Enable the HF XTAL as HF clock source</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4">DDI16BitfieldWrite</a>(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a>,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                           <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_HF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_HF_SRC_SEL_M</a>,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                           <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_HF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_HF_SRC_SEL_S</a>,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                           ui32Osc);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Configure the low frequency source clock.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span>(ui32SrcClk &amp; OSC_SRC_CLK_LF)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment">// Change the clock source.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4">DDI16BitfieldWrite</a>(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a>,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                           <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_LF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_LF_SRC_SEL_M</a>,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                           <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_LF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_LF_SRC_SEL_S</a>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                           ui32Osc);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="ttc" id="group__ddi__api_html_ga492326c095c70621a247fe02a2cb09e4"><div class="ttname"><a href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4">DDI16BitfieldWrite</a></div><div class="ttdeci">void DDI16BitfieldWrite(uint32_t ui32Base, uint32_t ui32Reg, uint32_t ui32Mask, uint32_t ui32Shift, uint16_t ui32Data)</div><div class="ttdoc">Write a bit field via the DDI using 16-bit maskable write. </div><div class="ttdef"><b>Definition:</b> ddi.c:117</div></div>
<div class="ttc" id="group__osc__api_html_gac53cc71494c69f6f486be9b3b0566b83"><div class="ttname"><a href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a></div><div class="ttdeci">#define OSC_SRC_CLK_HF</div><div class="ttdef"><b>Definition:</b> osc.h:120</div></div>
<div class="ttc" id="group__osc__api_html_ga69c226c32f77c516b33207cc23179c34"><div class="ttname"><a href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a></div><div class="ttdeci">#define OSC_RCOSC_HF</div><div class="ttdef"><b>Definition:</b> osc.h:123</div></div>
<div class="ttc" id="group__osc__api_html_gaa167a08c9239cfcfefb8c35bf984ce8b"><div class="ttname"><a href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a></div><div class="ttdeci">#define OSC_XOSC_HF</div><div class="ttdef"><b>Definition:</b> osc.h:124</div></div>
<div class="ttc" id="group__osc__api_html_gac57298ac9008f605f9b2c70609790bab"><div class="ttname"><a href="group__osc__api.html#gac57298ac9008f605f9b2c70609790bab">OSC_SRC_CLK_LF</a></div><div class="ttdeci">#define OSC_SRC_CLK_LF</div><div class="ttdef"><b>Definition:</b> osc.h:121</div></div>
<div class="ttc" id="group__debug__api_html_ga28301f76c53b643912da7c538f74e2c6"><div class="ttname"><a href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a></div><div class="ttdeci">#define ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> debug.h:73</div></div>
<div class="ttc" id="group__osc__api_html_ga77f1adccd50f1b219d9657ba2ac7dd9b"><div class="ttname"><a href="group__osc__api.html#ga77f1adccd50f1b219d9657ba2ac7dd9b">OSC_RCOSC_LF</a></div><div class="ttdeci">#define OSC_RCOSC_LF</div><div class="ttdef"><b>Definition:</b> osc.h:125</div></div>
<div class="ttc" id="group__osc__api_html_ga6502b0b712473f2ec7a4112cda0725bb"><div class="ttname"><a href="group__osc__api.html#ga6502b0b712473f2ec7a4112cda0725bb">OSC_XOSC_LF</a></div><div class="ttdeci">#define OSC_XOSC_LF</div><div class="ttdef"><b>Definition:</b> osc.h:126</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga37a02687fbd8680396550f682a7f046f_cgraph.png" border="0" usemap="#group__osc__api_ga37a02687fbd8680396550f682a7f046f_cgraph" alt=""/></div>
<map name="group__osc__api_ga37a02687fbd8680396550f682a7f046f_cgraph" id="group__osc__api_ga37a02687fbd8680396550f682a7f046f_cgraph">
<area shape="rect" id="node2" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4" title="Write a bit field via the DDI using 16&#45;bit maskable write. " alt="" coords="197,5,324,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga47914d2750ee826560f2107a567bb1a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OSCHF_AttemptToSwitchToXosc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch to XOSC_HF if XOSC_HF is ready. </p>
<p>This is a non-blocking function checking if the XOSC_HF is ready and performs the switching if ready. The function is somewhat blocking in the case where switching is performed.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns status of the XOSC_HF switching:<ul>
<li><code>true</code> : Switching to XOSC_HF has occurred.</li>
<li><code>false</code> : Switching has not occurred. </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="group__osc__api.html#ga7edb8da7333e41c49190bc2df3df9004">OSCHF_DebugGetCrystalStartupTime()</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   uint32_t startupTimeInUs;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   uint32_t prevLimmit25InUs;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor">#if ( defined( ROM_OSCClockSourceGet ))</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="rom_8h.html#a0a21a0e21465fb3492d6bad48d87c62b">ROM_OSCClockSourceGet</a>( <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a> ) == <a class="code" href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a> )</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet</a>( <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a> ) == <a class="code" href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a> )</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="comment">// Already on XOSC - nothing to do</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">return</span> ( 1 );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="group__osc__api.html#gae135dfece97e821338b93c4b32bc6980">OSCHfSourceReady</a>()) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch</a>();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="comment">// Store startup time, but limit to 25 percent reduction each time.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a43106e40eca3081e3964e8c87eddd8f1">timeXoscStable_CV</a>  = <a class="code" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      startupTimeInUs   = <a class="code" href="osc_8c.html#a6abf7e6bb075a2cba1441a8c27ba2528">RTC_CV_TO_US</a>( <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a43106e40eca3081e3964e8c87eddd8f1">timeXoscStable_CV</a> - <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#adf8bf929c47abf13770b3e60cab4ed2d">timeXoscOn_CV</a> );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      prevLimmit25InUs  = <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a9c9e6f187f285a033cb14ae968738c83">previousStartupTimeInUs</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      prevLimmit25InUs -= ( prevLimmit25InUs &gt;&gt; 2 ); <span class="comment">// 25 percent margin</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a9c9e6f187f285a033cb14ae968738c83">previousStartupTimeInUs</a> = startupTimeInUs;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">if</span> ( prevLimmit25InUs &gt; startupTimeInUs ) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;         <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a9c9e6f187f285a033cb14ae968738c83">previousStartupTimeInUs</a> = prevLimmit25InUs;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">return</span> ( 1 );</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="keywordflow">return</span> ( 0 );</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="ttc" id="group__osc__api_html_gac21e7c4532672c8fa7b90e493359ddc2"><div class="ttname"><a href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch</a></div><div class="ttdeci">static void OSCHfSourceSwitch(void)</div><div class="ttdoc">Switch the high frequency clock. </div><div class="ttdef"><b>Definition:</b> osc.h:315</div></div>
<div class="ttc" id="rom_8h_html_a0a21a0e21465fb3492d6bad48d87c62b"><div class="ttname"><a href="rom_8h.html#a0a21a0e21465fb3492d6bad48d87c62b">ROM_OSCClockSourceGet</a></div><div class="ttdeci">#define ROM_OSCClockSourceGet</div><div class="ttdef"><b>Definition:</b> rom.h:691</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_a43106e40eca3081e3964e8c87eddd8f1"><div class="ttname"><a href="struct_osc_hf_globals__t.html#a43106e40eca3081e3964e8c87eddd8f1">OscHfGlobals_t::timeXoscStable_CV</a></div><div class="ttdeci">uint32_t timeXoscStable_CV</div><div class="ttdef"><b>Definition:</b> osc.c:103</div></div>
<div class="ttc" id="group__osc__api_html_ga279bd3a34548bd4c5e2fc6939f7be228"><div class="ttname"><a href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet</a></div><div class="ttdeci">uint32_t OSCClockSourceGet(uint32_t ui32SrcClk)</div><div class="ttdoc">Get the source clock settings. </div><div class="ttdef"><b>Definition:</b> osc.c:152</div></div>
<div class="ttc" id="group__osc__api_html_gac53cc71494c69f6f486be9b3b0566b83"><div class="ttname"><a href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a></div><div class="ttdeci">#define OSC_SRC_CLK_HF</div><div class="ttdef"><b>Definition:</b> osc.h:120</div></div>
<div class="ttc" id="group__osc__api_html_gae135dfece97e821338b93c4b32bc6980"><div class="ttname"><a href="group__osc__api.html#gae135dfece97e821338b93c4b32bc6980">OSCHfSourceReady</a></div><div class="ttdeci">static bool OSCHfSourceReady(void)</div><div class="ttdoc">Check if the HF clock source is ready to be switched. </div><div class="ttdef"><b>Definition:</b> osc.h:287</div></div>
<div class="ttc" id="group__osc__api_html_gaa167a08c9239cfcfefb8c35bf984ce8b"><div class="ttname"><a href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a></div><div class="ttdeci">#define OSC_XOSC_HF</div><div class="ttdef"><b>Definition:</b> osc.h:124</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_a9c9e6f187f285a033cb14ae968738c83"><div class="ttname"><a href="struct_osc_hf_globals__t.html#a9c9e6f187f285a033cb14ae968738c83">OscHfGlobals_t::previousStartupTimeInUs</a></div><div class="ttdeci">uint32_t previousStartupTimeInUs</div><div class="ttdef"><b>Definition:</b> osc.c:100</div></div>
<div class="ttc" id="osc_8c_html_a29d04b8c698d597cbfe1df302c157412"><div class="ttname"><a href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a></div><div class="ttdeci">static OscHfGlobals_t oscHfGlobals</div><div class="ttdef"><b>Definition:</b> osc.c:107</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_adf8bf929c47abf13770b3e60cab4ed2d"><div class="ttname"><a href="struct_osc_hf_globals__t.html#adf8bf929c47abf13770b3e60cab4ed2d">OscHfGlobals_t::timeXoscOn_CV</a></div><div class="ttdeci">uint32_t timeXoscOn_CV</div><div class="ttdef"><b>Definition:</b> osc.c:102</div></div>
<div class="ttc" id="osc_8c_html_a6abf7e6bb075a2cba1441a8c27ba2528"><div class="ttname"><a href="osc_8c.html#a6abf7e6bb075a2cba1441a8c27ba2528">RTC_CV_TO_US</a></div><div class="ttdeci">#define RTC_CV_TO_US(x)</div><div class="ttdef"><b>Definition:</b> osc.c:97</div></div>
<div class="ttc" id="group__aonrtc__api_html_ga1902a51367c543edbb07257e8ce9631a"><div class="ttname"><a href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a></div><div class="ttdeci">static uint32_t AONRTCCurrentCompareValueGet(void)</div><div class="ttdoc">Get the current value of the RTC counter in a format that matches RTC compare values. </div><div class="ttdef"><b>Definition:</b> aon_rtc.h:819</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga47914d2750ee826560f2107a567bb1a4_cgraph.png" border="0" usemap="#group__osc__api_ga47914d2750ee826560f2107a567bb1a4_cgraph" alt=""/></div>
<map name="group__osc__api_ga47914d2750ee826560f2107a567bb1a4_cgraph" id="group__osc__api_ga47914d2750ee826560f2107a567bb1a4_cgraph">
<area shape="rect" id="node2" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228" title="Get the source clock settings. " alt="" coords="307,5,452,32"/>
<area shape="rect" id="node4" href="group__osc__api.html#gae135dfece97e821338b93c4b32bc6980" title="Check if the HF clock source is ready to be switched. " alt="" coords="309,56,449,83"/>
<area shape="rect" id="node5" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2" title="Switch the high frequency clock. " alt="" coords="308,107,451,133"/>
<area shape="rect" id="node6" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a" title="Get the current value of the RTC counter in a format that matches RTC compare values. " alt="" coords="268,157,491,184"/>
<area shape="rect" id="node3" href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4" title="Read a bit field via the DDI using 16&#45;bit read. " alt="" coords="539,31,665,57"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga33e3c6c58c877cfa2be8221148ed1885"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t OSCHF_DebugGetCrystalAmplitude </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get crystal amplitude (assuming crystal is running). </p>
<dl class="section note"><dt>Note</dt><dd>This is a debug function only. It is hence not recommended to call this function in normal operation.</dd></dl>
<p>This function uses an on-chip ADC and peak detector for reading the crystal amplitude. The measurement time is set to 4 milliseconds and this function does not return before the measurement is done.</p>
<p>Expected value is <a class="el" href="group__osc__api.html#ga19ebf81100cd985a838276260fde3cab">OSCHF_DebugGetExpectedAverageCrystalAmplitude</a> +/- 50 millivolt.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns crystal amplitude in millivolt.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga19ebf81100cd985a838276260fde3cab" title="Get the expected average crystal amplitude. ">OSCHF_DebugGetExpectedAverageCrystalAmplitude()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   uint32_t oscCfgRegCopy  ;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   uint32_t startTime      ;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   uint32_t deltaTime      ;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   uint32_t ampValue       ;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="comment">// The specified method is as follows:</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <span class="comment">// 1. Set minimum interval between oscillator amplitude calibrations.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="comment">//    (Done by setting PER_M=0 and PER_E=1)</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <span class="comment">// 2. Wait approximately 4 milliseconds in order to measure over a</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="comment">//    moderately large number of calibrations.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="comment">// 3. Read out the crystal amplitude value from the peek detector.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="comment">// 4. Restore original oscillator amplitude calibrations interval.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="comment">// 5. Return crystal amplitude value converted to millivolt.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   oscCfgRegCopy = HWREG( <a href=../register_descriptions/CPU_MMAP/AON_PMCTL.html target="_blank">AON_PMCTL_BASE</a> + <a href=../register_descriptions/CPU_MMAP/AON_PMCTL.html#OSCCFG target="_blank">AON_PMCTL_O_OSCCFG</a> );</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   HWREG( <a href=../register_descriptions/CPU_MMAP/AON_PMCTL.html target="_blank">AON_PMCTL_BASE</a> + <a href=../register_descriptions/CPU_MMAP/AON_PMCTL.html#OSCCFG target="_blank">AON_PMCTL_O_OSCCFG</a> ) = ( 1 &lt;&lt; <a href=../register_descriptions/CPU_MMAP/AON_PMCTL.html#OSCCFG_PER_E target="_blank">AON_PMCTL_OSCCFG_PER_E_S</a> );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   startTime = <a class="code" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a>();</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      deltaTime = <a class="code" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a>() - startTime;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   } <span class="keywordflow">while</span> ( deltaTime &lt; ((uint32_t)( 0.004 * <a class="code" href="group__aonrtc__api.html#ga7457aa34a5d138ac55039527a61b9174">FACTOR_SEC_TO_COMP_VAL_FORMAT</a> )));</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   ampValue = ( HWREG( <a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a> + <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT1 target="_blank">DDI_0_OSC_O_STAT1</a> ) &amp;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT1_HPM_UPDATE_AMP target="_blank">DDI_0_OSC_STAT1_HPM_UPDATE_AMP_M</a> ) &gt;&gt;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT1_HPM_UPDATE_AMP target="_blank">DDI_0_OSC_STAT1_HPM_UPDATE_AMP_S</a> ;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   HWREG( <a href=../register_descriptions/CPU_MMAP/AON_PMCTL.html target="_blank">AON_PMCTL_BASE</a> + <a href=../register_descriptions/CPU_MMAP/AON_PMCTL.html#OSCCFG target="_blank">AON_PMCTL_O_OSCCFG</a> ) = oscCfgRegCopy;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordflow">return</span> ( ampValue * 15 );</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div>
<div class="ttc" id="group__aonrtc__api_html_ga7457aa34a5d138ac55039527a61b9174"><div class="ttname"><a href="group__aonrtc__api.html#ga7457aa34a5d138ac55039527a61b9174">FACTOR_SEC_TO_COMP_VAL_FORMAT</a></div><div class="ttdeci">#define FACTOR_SEC_TO_COMP_VAL_FORMAT</div><div class="ttdef"><b>Definition:</b> aon_rtc.h:150</div></div>
<div class="ttc" id="group__aonrtc__api_html_ga1902a51367c543edbb07257e8ce9631a"><div class="ttname"><a href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a></div><div class="ttdeci">static uint32_t AONRTCCurrentCompareValueGet(void)</div><div class="ttdoc">Get the current value of the RTC counter in a format that matches RTC compare values. </div><div class="ttdef"><b>Definition:</b> aon_rtc.h:819</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga33e3c6c58c877cfa2be8221148ed1885_cgraph.png" border="0" usemap="#group__osc__api_ga33e3c6c58c877cfa2be8221148ed1885_cgraph" alt=""/></div>
<map name="group__osc__api_ga33e3c6c58c877cfa2be8221148ed1885_cgraph" id="group__osc__api_ga33e3c6c58c877cfa2be8221148ed1885_cgraph">
<area shape="rect" id="node2" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a" title="Get the current value of the RTC counter in a format that matches RTC compare values. " alt="" coords="284,5,507,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7edb8da7333e41c49190bc2df3df9004"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t OSCHF_DebugGetCrystalStartupTime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measure the crystal startup time. </p>
<dl class="section note"><dt>Note</dt><dd>This is a debug function that should not be needed in normal operation.</dd></dl>
<p>This function assumes that the chip is running on RCOSC_HF when called. It then switches to XOSC_HF while measuring number of LF-clock edges before XOSC_HF has started and are ready to be used. After that, the function switches back to RCOSC_HF and returns number of LF-edges found.</p>
<p>The length in time between the LF clock edges is approximately 15 microseconds. Or more exactly: LF_clock_edges / ( 32768 * 2 ) seconds.</p>
<p>Please note that the startup time, in addition to the crystal itself also can vary depending on the time since the crystal was stopped and the frequency of the RCOSC_HF oscillator. Calling this function intensively will show a shorter startup time than in typical use cases. When running with TI-RTOS there is a background task (optional but default on) adjusting RCOSC_HF to be as equal as possible to the crystal frequency, giving the shortest possible startup time.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns number of LF-clock edges from starting the crystal until it's ready to be used. </dd></dl>
<div class="fragment"><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;{</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   uint32_t lfEdgesFound = 0 ;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <span class="comment">// Start operation in sync with the LF clock</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   HWREG( <a href=../register_descriptions/CPU_MMAP/AON_RTC.html target="_blank">AON_RTC_BASE</a> + <a href=../register_descriptions/CPU_MMAP/AON_RTC.html#SYNCLF target="_blank">AON_RTC_O_SYNCLF</a> );</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <a class="code" href="group__osc__api.html#gaee5a511c4ca70e8eb66f4a6252488506">OSCHF_TurnOnXosc</a>();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keywordflow">while</span> ( ! <a class="code" href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4">OSCHF_AttemptToSwitchToXosc</a>() ) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      HWREG( <a href=../register_descriptions/CPU_MMAP/AON_RTC.html target="_blank">AON_RTC_BASE</a> + <a href=../register_descriptions/CPU_MMAP/AON_RTC.html#SYNCLF target="_blank">AON_RTC_O_SYNCLF</a> );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      lfEdgesFound ++ ;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <a class="code" href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c">OSCHF_SwitchToRcOscTurnOffXosc</a>();</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <span class="keywordflow">return</span> ( lfEdgesFound );</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div>
<div class="ttc" id="group__osc__api_html_ga47914d2750ee826560f2107a567bb1a4"><div class="ttname"><a href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4">OSCHF_AttemptToSwitchToXosc</a></div><div class="ttdeci">bool OSCHF_AttemptToSwitchToXosc(void)</div><div class="ttdoc">Switch to XOSC_HF if XOSC_HF is ready. </div><div class="ttdef"><b>Definition:</b> osc.c:259</div></div>
<div class="ttc" id="group__osc__api_html_ga9eeb99e769d9c911305ff4c3c33c736c"><div class="ttname"><a href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c">OSCHF_SwitchToRcOscTurnOffXosc</a></div><div class="ttdeci">void OSCHF_SwitchToRcOscTurnOffXosc(void)</div><div class="ttdoc">Switch to RCOSC_HF and turn off XOSC_HF. </div><div class="ttdef"><b>Definition:</b> osc.c:297</div></div>
<div class="ttc" id="group__osc__api_html_gaee5a511c4ca70e8eb66f4a6252488506"><div class="ttname"><a href="group__osc__api.html#gaee5a511c4ca70e8eb66f4a6252488506">OSCHF_TurnOnXosc</a></div><div class="ttdeci">void OSCHF_TurnOnXosc(void)</div><div class="ttdoc">Turns on XOSC_HF (but without switching to XOSC_HF). </div><div class="ttdef"><b>Definition:</b> osc.c:242</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga7edb8da7333e41c49190bc2df3df9004_cgraph.png" border="0" usemap="#group__osc__api_ga7edb8da7333e41c49190bc2df3df9004_cgraph" alt=""/></div>
<map name="group__osc__api_ga7edb8da7333e41c49190bc2df3df9004_cgraph" id="group__osc__api_ga7edb8da7333e41c49190bc2df3df9004_cgraph">
<area shape="rect" id="node2" href="group__osc__api.html#gaee5a511c4ca70e8eb66f4a6252488506" title="Turns on XOSC_HF (but without switching to XOSC_HF). " alt="" coords="342,56,486,83"/>
<area shape="rect" id="node6" href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4" title="Switch to XOSC_HF if XOSC_HF is ready. " alt="" coords="307,157,521,184"/>
<area shape="rect" id="node11" href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c" title="Switch to RCOSC_HF and turn off XOSC_HF. " alt="" coords="296,107,532,133"/>
<area shape="rect" id="node3" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f" title="Configure the oscillator input to the a source clock. " alt="" coords="619,5,763,32"/>
<area shape="rect" id="node5" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a" title="Get the current value of the RTC counter in a format that matches RTC compare values. " alt="" coords="580,56,803,83"/>
<area shape="rect" id="node4" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4" title="Write a bit field via the DDI using 16&#45;bit maskable write. " alt="" coords="851,5,977,32"/>
<area shape="rect" id="node7" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228" title="Get the source clock settings. " alt="" coords="619,157,764,184"/>
<area shape="rect" id="node9" href="group__osc__api.html#gae135dfece97e821338b93c4b32bc6980" title="Check if the HF clock source is ready to be switched. " alt="" coords="621,259,761,285"/>
<area shape="rect" id="node10" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2" title="Switch the high frequency clock. " alt="" coords="620,208,763,235"/>
<area shape="rect" id="node8" href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4" title="Read a bit field via the DDI using 16&#45;bit read. " alt="" coords="851,208,977,235"/>
<area shape="rect" id="node12" href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57" title="Get the current temperature measurement as a signed value in Deg Celsius. " alt="" coords="581,107,801,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga19ebf81100cd985a838276260fde3cab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t OSCHF_DebugGetExpectedAverageCrystalAmplitude </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the expected average crystal amplitude. </p>
<dl class="section note"><dt>Note</dt><dd>This is a debug function only. It is hence not recommended to call this function in normal operation.</dd></dl>
<p>This function read the configured high and low thresholds and returns the mean value converted to millivolt.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns expected average crystal amplitude in millivolt.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga33e3c6c58c877cfa2be8221148ed1885" title="Get crystal amplitude (assuming crystal is running). ">OSCHF_DebugGetCrystalAmplitude()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;{</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   uint32_t ampCompTh1    ;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   uint32_t highThreshold ;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   uint32_t lowThreshold  ;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   ampCompTh1 = HWREG( <a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a> + <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#AMPCOMPTH1 target="_blank">DDI_0_OSC_O_AMPCOMPTH1</a> );</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   highThreshold = ( ampCompTh1 &amp; <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#AMPCOMPTH1_HPMRAMP3_HTH target="_blank">DDI_0_OSC_AMPCOMPTH1_HPMRAMP3_HTH_M</a> ) &gt;&gt;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                                  <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#AMPCOMPTH1_HPMRAMP3_HTH target="_blank">DDI_0_OSC_AMPCOMPTH1_HPMRAMP3_HTH_S</a> ;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   lowThreshold  = ( ampCompTh1 &amp; <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#AMPCOMPTH1_HPMRAMP3_LTH target="_blank">DDI_0_OSC_AMPCOMPTH1_HPMRAMP3_LTH_M</a> ) &gt;&gt;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                                  <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#AMPCOMPTH1_HPMRAMP3_LTH target="_blank">DDI_0_OSC_AMPCOMPTH1_HPMRAMP3_LTH_S</a> ;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keywordflow">return</span> ((( highThreshold + lowThreshold ) * 15 ) &gt;&gt; 1 );</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga8f7fce82e80c984531622af61963db51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t OSCHF_GetStartupTime </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeUntilWakeupInMs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns maximum startup time (in microseconds) of XOSC_HF. </p>
<p>The startup time depends on several factors. This function calculates the maximum startup time based on statistical information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeUntilWakeupInMs</td><td>indicates how long time (milliseconds) to the startup will occur.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Time margin to use in microseconds. </dd></dl>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   uint32_t deltaTimeSinceXoscOnInMs   ;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   int32_t  deltaTempSinceXoscOn       ;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   uint32_t newStartupTimeInUs         ;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// Check CCFG to determine if device is configured for TCXO.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span>( ( HWREG( <a href=../register_descriptions/CPU_MMAP/CCFG.html target="_blank">CCFG_BASE</a> + <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF target="_blank">CCFG_O_MODE_CONF</a> ) &amp; <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_XOSC_FREQ target="_blank">CCFG_MODE_CONF_XOSC_FREQ_M</a> ) == <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_XOSC_FREQ target="_blank">CCFG_MODE_CONF_XOSC_FREQ_TCXO</a> )</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">// Device configured for TCXO. Report fixed startup time located in CCFG with</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// coversion from number of 100us to number of us.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        newStartupTimeInUs = (( HWREG( <a href=../register_descriptions/CPU_MMAP/CCFG.html target="_blank">CCFG_BASE</a> + <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_1 target="_blank">CCFG_O_MODE_CONF_1</a> ) &amp; <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_1_TCXO_MAX_START target="_blank">CCFG_MODE_CONF_1_TCXO_MAX_START_M</a> ) &gt;&gt;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                                                          <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_1_TCXO_MAX_START target="_blank">CCFG_MODE_CONF_1_TCXO_MAX_START_S</a> ) * 100;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;       deltaTimeSinceXoscOnInMs = <a class="code" href="osc_8c.html#a84e2ef2892213ad4a4f275252801369a">RTC_CV_TO_MS</a>( <a class="code" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a>() - <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#adf8bf929c47abf13770b3e60cab4ed2d">timeXoscOn_CV</a> );</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;       deltaTempSinceXoscOn     = <a class="code" href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57">AONBatMonTemperatureGetDegC</a>() - <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a86e3f9dff9438f95befcd789ccbdf1fa">tempXoscOff</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;       <span class="keywordflow">if</span> ( deltaTempSinceXoscOn &lt; 0 ) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;          deltaTempSinceXoscOn = -deltaTempSinceXoscOn;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;       }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;       <span class="keywordflow">if</span> (  (( timeUntilWakeupInMs + deltaTimeSinceXoscOnInMs )     &gt; 3000 ) ||</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;             ( deltaTempSinceXoscOn                                  &gt;    5 ) ||</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;             ( <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a43106e40eca3081e3964e8c87eddd8f1">timeXoscStable_CV</a> &lt; <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#adf8bf929c47abf13770b3e60cab4ed2d">timeXoscOn_CV</a>  ) ||</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;             ( <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a9c9e6f187f285a033cb14ae968738c83">previousStartupTimeInUs</a>                  ==   0 )    )</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;       {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          newStartupTimeInUs = 2000;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          <span class="keywordflow">if</span> (( HWREG( <a href=../register_descriptions/CPU_MMAP/CCFG.html target="_blank">CCFG_BASE</a> + <a href=../register_descriptions/CPU_MMAP/CCFG.html#SIZE_AND_DIS_FLAGS target="_blank">CCFG_O_SIZE_AND_DIS_FLAGS</a> ) &amp; <a href=../register_descriptions/CPU_MMAP/CCFG.html#SIZE_AND_DIS_FLAGS_DIS_XOSC_OVR target="_blank">CCFG_SIZE_AND_DIS_FLAGS_DIS_XOSC_OVR_M</a> ) == 0 ) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;             newStartupTimeInUs = (( HWREG( <a href=../register_descriptions/CPU_MMAP/CCFG.html target="_blank">CCFG_BASE</a> + <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_1 target="_blank">CCFG_O_MODE_CONF_1</a> ) &amp;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_1_XOSC_MAX_START target="_blank">CCFG_MODE_CONF_1_XOSC_MAX_START_M</a> ) &gt;&gt;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <a href=../register_descriptions/CPU_MMAP/CCFG.html#MODE_CONF_1_XOSC_MAX_START target="_blank">CCFG_MODE_CONF_1_XOSC_MAX_START_S</a> ) * 125;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="comment">// Note: CCFG startup time is &quot;in units of 100us&quot; adding 25% margin results in *125</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;       } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          newStartupTimeInUs = <a class="code" href="osc_8c.html#a6abf7e6bb075a2cba1441a8c27ba2528">RTC_CV_TO_US</a>( <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a43106e40eca3081e3964e8c87eddd8f1">timeXoscStable_CV</a> - <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#adf8bf929c47abf13770b3e60cab4ed2d">timeXoscOn_CV</a> );</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          newStartupTimeInUs += ( newStartupTimeInUs &gt;&gt; 2 ); <span class="comment">// Add 25 percent margin</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;          <span class="keywordflow">if</span> ( newStartupTimeInUs &lt; <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a9c9e6f187f285a033cb14ae968738c83">previousStartupTimeInUs</a> ) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;             newStartupTimeInUs = <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a9c9e6f187f285a033cb14ae968738c83">previousStartupTimeInUs</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;       }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;       <span class="keywordflow">if</span> ( newStartupTimeInUs &lt; 200 ) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          newStartupTimeInUs = 200;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;       }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;       <span class="keywordflow">if</span> ( newStartupTimeInUs &gt; 4000 ) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          newStartupTimeInUs = 4000;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;       }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <span class="keywordflow">return</span> ( newStartupTimeInUs );</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="ttc" id="struct_osc_hf_globals__t_html_a43106e40eca3081e3964e8c87eddd8f1"><div class="ttname"><a href="struct_osc_hf_globals__t.html#a43106e40eca3081e3964e8c87eddd8f1">OscHfGlobals_t::timeXoscStable_CV</a></div><div class="ttdeci">uint32_t timeXoscStable_CV</div><div class="ttdef"><b>Definition:</b> osc.c:103</div></div>
<div class="ttc" id="group__aonbatmon__api_html_gadc33e3e057f96ec6fc9fff57bd64de57"><div class="ttname"><a href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57">AONBatMonTemperatureGetDegC</a></div><div class="ttdeci">int32_t AONBatMonTemperatureGetDegC(void)</div><div class="ttdoc">Get the current temperature measurement as a signed value in Deg Celsius. </div><div class="ttdef"><b>Definition:</b> aon_batmon.c:60</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_a9c9e6f187f285a033cb14ae968738c83"><div class="ttname"><a href="struct_osc_hf_globals__t.html#a9c9e6f187f285a033cb14ae968738c83">OscHfGlobals_t::previousStartupTimeInUs</a></div><div class="ttdeci">uint32_t previousStartupTimeInUs</div><div class="ttdef"><b>Definition:</b> osc.c:100</div></div>
<div class="ttc" id="osc_8c_html_a29d04b8c698d597cbfe1df302c157412"><div class="ttname"><a href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a></div><div class="ttdeci">static OscHfGlobals_t oscHfGlobals</div><div class="ttdef"><b>Definition:</b> osc.c:107</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_a86e3f9dff9438f95befcd789ccbdf1fa"><div class="ttname"><a href="struct_osc_hf_globals__t.html#a86e3f9dff9438f95befcd789ccbdf1fa">OscHfGlobals_t::tempXoscOff</a></div><div class="ttdeci">int32_t tempXoscOff</div><div class="ttdef"><b>Definition:</b> osc.c:104</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_adf8bf929c47abf13770b3e60cab4ed2d"><div class="ttname"><a href="struct_osc_hf_globals__t.html#adf8bf929c47abf13770b3e60cab4ed2d">OscHfGlobals_t::timeXoscOn_CV</a></div><div class="ttdeci">uint32_t timeXoscOn_CV</div><div class="ttdef"><b>Definition:</b> osc.c:102</div></div>
<div class="ttc" id="osc_8c_html_a6abf7e6bb075a2cba1441a8c27ba2528"><div class="ttname"><a href="osc_8c.html#a6abf7e6bb075a2cba1441a8c27ba2528">RTC_CV_TO_US</a></div><div class="ttdeci">#define RTC_CV_TO_US(x)</div><div class="ttdef"><b>Definition:</b> osc.c:97</div></div>
<div class="ttc" id="group__aonrtc__api_html_ga1902a51367c543edbb07257e8ce9631a"><div class="ttname"><a href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a></div><div class="ttdeci">static uint32_t AONRTCCurrentCompareValueGet(void)</div><div class="ttdoc">Get the current value of the RTC counter in a format that matches RTC compare values. </div><div class="ttdef"><b>Definition:</b> aon_rtc.h:819</div></div>
<div class="ttc" id="osc_8c_html_a84e2ef2892213ad4a4f275252801369a"><div class="ttname"><a href="osc_8c.html#a84e2ef2892213ad4a4f275252801369a">RTC_CV_TO_MS</a></div><div class="ttdeci">#define RTC_CV_TO_MS(x)</div><div class="ttdef"><b>Definition:</b> osc.c:96</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga8f7fce82e80c984531622af61963db51_cgraph.png" border="0" usemap="#group__osc__api_ga8f7fce82e80c984531622af61963db51_cgraph" alt=""/></div>
<map name="group__osc__api_ga8f7fce82e80c984531622af61963db51_cgraph" id="group__osc__api_ga8f7fce82e80c984531622af61963db51_cgraph">
<area shape="rect" id="node2" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a" title="Get the current value of the RTC counter in a format that matches RTC compare values. " alt="" coords="219,5,441,32"/>
<area shape="rect" id="node3" href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57" title="Get the current temperature measurement as a signed value in Deg Celsius. " alt="" coords="220,56,440,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9eeb99e769d9c911305ff4c3c33c736c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSCHF_SwitchToRcOscTurnOffXosc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch to RCOSC_HF and turn off XOSC_HF. </p>
<p>This operation takes approximately 50 microseconds (can be shorter if RCOSC_HF already was running).</p>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

<p>Referenced by <a class="el" href="group__osc__api.html#ga7edb8da7333e41c49190bc2df3df9004">OSCHF_DebugGetCrystalStartupTime()</a>.</p>
<div class="fragment"><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;{</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">#if ( defined( ROM_OSCClockSourceSet ))</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <a class="code" href="rom_8h.html#a90db332d20c6899ea9b769b8caddf151">ROM_OSCClockSourceSet</a>( <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a>, <a class="code" href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a> );</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet</a>( <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a>, <a class="code" href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a> );</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="comment">// Do the switching if not already running on RCOSC_HF</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#if ( defined( ROM_OSCClockSourceGet ))</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="rom_8h.html#a0a21a0e21465fb3492d6bad48d87c62b">ROM_OSCClockSourceGet</a>( <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a> ) != <a class="code" href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a> )</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet</a>( <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a> ) != <a class="code" href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a> )</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <a class="code" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch</a>();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#aaee7735d88f4a6305eaab839196fa388">timeXoscOff_CV</a>  = <a class="code" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a>();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#a86e3f9dff9438f95befcd789ccbdf1fa">tempXoscOff</a>     = <a class="code" href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57">AONBatMonTemperatureGetDegC</a>();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div>
<div class="ttc" id="group__osc__api_html_gac21e7c4532672c8fa7b90e493359ddc2"><div class="ttname"><a href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch</a></div><div class="ttdeci">static void OSCHfSourceSwitch(void)</div><div class="ttdoc">Switch the high frequency clock. </div><div class="ttdef"><b>Definition:</b> osc.h:315</div></div>
<div class="ttc" id="rom_8h_html_a90db332d20c6899ea9b769b8caddf151"><div class="ttname"><a href="rom_8h.html#a90db332d20c6899ea9b769b8caddf151">ROM_OSCClockSourceSet</a></div><div class="ttdeci">#define ROM_OSCClockSourceSet</div><div class="ttdef"><b>Definition:</b> rom.h:695</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_aaee7735d88f4a6305eaab839196fa388"><div class="ttname"><a href="struct_osc_hf_globals__t.html#aaee7735d88f4a6305eaab839196fa388">OscHfGlobals_t::timeXoscOff_CV</a></div><div class="ttdeci">uint32_t timeXoscOff_CV</div><div class="ttdef"><b>Definition:</b> osc.c:101</div></div>
<div class="ttc" id="rom_8h_html_a0a21a0e21465fb3492d6bad48d87c62b"><div class="ttname"><a href="rom_8h.html#a0a21a0e21465fb3492d6bad48d87c62b">ROM_OSCClockSourceGet</a></div><div class="ttdeci">#define ROM_OSCClockSourceGet</div><div class="ttdef"><b>Definition:</b> rom.h:691</div></div>
<div class="ttc" id="group__aonbatmon__api_html_gadc33e3e057f96ec6fc9fff57bd64de57"><div class="ttname"><a href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57">AONBatMonTemperatureGetDegC</a></div><div class="ttdeci">int32_t AONBatMonTemperatureGetDegC(void)</div><div class="ttdoc">Get the current temperature measurement as a signed value in Deg Celsius. </div><div class="ttdef"><b>Definition:</b> aon_batmon.c:60</div></div>
<div class="ttc" id="group__osc__api_html_ga279bd3a34548bd4c5e2fc6939f7be228"><div class="ttname"><a href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet</a></div><div class="ttdeci">uint32_t OSCClockSourceGet(uint32_t ui32SrcClk)</div><div class="ttdoc">Get the source clock settings. </div><div class="ttdef"><b>Definition:</b> osc.c:152</div></div>
<div class="ttc" id="group__osc__api_html_gac53cc71494c69f6f486be9b3b0566b83"><div class="ttname"><a href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a></div><div class="ttdeci">#define OSC_SRC_CLK_HF</div><div class="ttdef"><b>Definition:</b> osc.h:120</div></div>
<div class="ttc" id="group__osc__api_html_ga69c226c32f77c516b33207cc23179c34"><div class="ttname"><a href="group__osc__api.html#ga69c226c32f77c516b33207cc23179c34">OSC_RCOSC_HF</a></div><div class="ttdeci">#define OSC_RCOSC_HF</div><div class="ttdef"><b>Definition:</b> osc.h:123</div></div>
<div class="ttc" id="osc_8c_html_a29d04b8c698d597cbfe1df302c157412"><div class="ttname"><a href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a></div><div class="ttdeci">static OscHfGlobals_t oscHfGlobals</div><div class="ttdef"><b>Definition:</b> osc.c:107</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_a86e3f9dff9438f95befcd789ccbdf1fa"><div class="ttname"><a href="struct_osc_hf_globals__t.html#a86e3f9dff9438f95befcd789ccbdf1fa">OscHfGlobals_t::tempXoscOff</a></div><div class="ttdeci">int32_t tempXoscOff</div><div class="ttdef"><b>Definition:</b> osc.c:104</div></div>
<div class="ttc" id="group__osc__api_html_ga37a02687fbd8680396550f682a7f046f"><div class="ttname"><a href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet</a></div><div class="ttdeci">void OSCClockSourceSet(uint32_t ui32SrcClk, uint32_t ui32Osc)</div><div class="ttdoc">Configure the oscillator input to the a source clock. </div><div class="ttdef"><b>Definition:</b> osc.c:115</div></div>
<div class="ttc" id="group__aonrtc__api_html_ga1902a51367c543edbb07257e8ce9631a"><div class="ttname"><a href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a></div><div class="ttdeci">static uint32_t AONRTCCurrentCompareValueGet(void)</div><div class="ttdoc">Get the current value of the RTC counter in a format that matches RTC compare values. </div><div class="ttdef"><b>Definition:</b> aon_rtc.h:819</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga9eeb99e769d9c911305ff4c3c33c736c_cgraph.png" border="0" usemap="#group__osc__api_ga9eeb99e769d9c911305ff4c3c33c736c_cgraph" alt=""/></div>
<map name="group__osc__api_ga9eeb99e769d9c911305ff4c3c33c736c_cgraph" id="group__osc__api_ga9eeb99e769d9c911305ff4c3c33c736c_cgraph">
<area shape="rect" id="node2" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f" title="Configure the oscillator input to the a source clock. " alt="" coords="329,5,473,32"/>
<area shape="rect" id="node4" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228" title="Get the source clock settings. " alt="" coords="328,56,473,83"/>
<area shape="rect" id="node6" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2" title="Switch the high frequency clock. " alt="" coords="329,107,472,133"/>
<area shape="rect" id="node7" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a" title="Get the current value of the RTC counter in a format that matches RTC compare values. " alt="" coords="289,157,512,184"/>
<area shape="rect" id="node8" href="group__aonbatmon__api.html#gadc33e3e057f96ec6fc9fff57bd64de57" title="Get the current temperature measurement as a signed value in Deg Celsius. " alt="" coords="291,208,511,235"/>
<area shape="rect" id="node3" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4" title="Write a bit field via the DDI using 16&#45;bit maskable write. " alt="" coords="560,5,687,32"/>
<area shape="rect" id="node5" href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4" title="Read a bit field via the DDI using 16&#45;bit read. " alt="" coords="560,56,687,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaee5a511c4ca70e8eb66f4a6252488506"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSCHF_TurnOnXosc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns on XOSC_HF (but without switching to XOSC_HF). </p>
<p>This function simply indicates the need for XOSC_HF to the hardware which initiates the XOSC_HF startup.</p>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

<p>Referenced by <a class="el" href="group__osc__api.html#ga7edb8da7333e41c49190bc2df3df9004">OSCHF_DebugGetCrystalStartupTime()</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#if ( defined( ROM_OSCClockSourceSet ))</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="rom_8h.html#a90db332d20c6899ea9b769b8caddf151">ROM_OSCClockSourceSet</a>( <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a>, <a class="code" href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a> );</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <a class="code" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet</a>( <a class="code" href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a>, <a class="code" href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a> );</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <a class="code" href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a>.<a class="code" href="struct_osc_hf_globals__t.html#adf8bf929c47abf13770b3e60cab4ed2d">timeXoscOn_CV</a>  = <a class="code" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a>();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
<div class="ttc" id="rom_8h_html_a90db332d20c6899ea9b769b8caddf151"><div class="ttname"><a href="rom_8h.html#a90db332d20c6899ea9b769b8caddf151">ROM_OSCClockSourceSet</a></div><div class="ttdeci">#define ROM_OSCClockSourceSet</div><div class="ttdef"><b>Definition:</b> rom.h:695</div></div>
<div class="ttc" id="group__osc__api_html_gac53cc71494c69f6f486be9b3b0566b83"><div class="ttname"><a href="group__osc__api.html#gac53cc71494c69f6f486be9b3b0566b83">OSC_SRC_CLK_HF</a></div><div class="ttdeci">#define OSC_SRC_CLK_HF</div><div class="ttdef"><b>Definition:</b> osc.h:120</div></div>
<div class="ttc" id="group__osc__api_html_gaa167a08c9239cfcfefb8c35bf984ce8b"><div class="ttname"><a href="group__osc__api.html#gaa167a08c9239cfcfefb8c35bf984ce8b">OSC_XOSC_HF</a></div><div class="ttdeci">#define OSC_XOSC_HF</div><div class="ttdef"><b>Definition:</b> osc.h:124</div></div>
<div class="ttc" id="osc_8c_html_a29d04b8c698d597cbfe1df302c157412"><div class="ttname"><a href="osc_8c.html#a29d04b8c698d597cbfe1df302c157412">oscHfGlobals</a></div><div class="ttdeci">static OscHfGlobals_t oscHfGlobals</div><div class="ttdef"><b>Definition:</b> osc.c:107</div></div>
<div class="ttc" id="struct_osc_hf_globals__t_html_adf8bf929c47abf13770b3e60cab4ed2d"><div class="ttname"><a href="struct_osc_hf_globals__t.html#adf8bf929c47abf13770b3e60cab4ed2d">OscHfGlobals_t::timeXoscOn_CV</a></div><div class="ttdeci">uint32_t timeXoscOn_CV</div><div class="ttdef"><b>Definition:</b> osc.c:102</div></div>
<div class="ttc" id="group__osc__api_html_ga37a02687fbd8680396550f682a7f046f"><div class="ttname"><a href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet</a></div><div class="ttdeci">void OSCClockSourceSet(uint32_t ui32SrcClk, uint32_t ui32Osc)</div><div class="ttdoc">Configure the oscillator input to the a source clock. </div><div class="ttdef"><b>Definition:</b> osc.c:115</div></div>
<div class="ttc" id="group__aonrtc__api_html_ga1902a51367c543edbb07257e8ce9631a"><div class="ttname"><a href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a">AONRTCCurrentCompareValueGet</a></div><div class="ttdeci">static uint32_t AONRTCCurrentCompareValueGet(void)</div><div class="ttdoc">Get the current value of the RTC counter in a format that matches RTC compare values. </div><div class="ttdef"><b>Definition:</b> aon_rtc.h:819</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_gaee5a511c4ca70e8eb66f4a6252488506_cgraph.png" border="0" usemap="#group__osc__api_gaee5a511c4ca70e8eb66f4a6252488506_cgraph" alt=""/></div>
<map name="group__osc__api_gaee5a511c4ca70e8eb66f4a6252488506_cgraph" id="group__osc__api_gaee5a511c4ca70e8eb66f4a6252488506_cgraph">
<area shape="rect" id="node2" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f" title="Configure the oscillator input to the a source clock. " alt="" coords="237,5,381,32"/>
<area shape="rect" id="node4" href="group__aonrtc__api.html#ga1902a51367c543edbb07257e8ce9631a" title="Get the current value of the RTC counter in a format that matches RTC compare values. " alt="" coords="197,56,420,83"/>
<area shape="rect" id="node3" href="group__ddi__api.html#ga492326c095c70621a247fe02a2cb09e4" title="Write a bit field via the DDI using 16&#45;bit maskable write. " alt="" coords="468,5,595,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gae135dfece97e821338b93c4b32bc6980"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool OSCHfSourceReady </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the HF clock source is ready to be switched. </p>
<p>If a request to switch the HF clock source has been made, this function can be used to check if the clock source is ready to be switched.</p>
<p>Once the HF clock source is ready the switch can be performed by calling the <a class="el" href="group__osc__api.html#gac21e7c4532672c8fa7b90e493359ddc2">OSCHfSourceSwitch()</a></p>
<dl class="section return"><dt>Returns</dt><dd>Returns status of HF clock source:<ul>
<li><code>true</code> : HF clock source is ready.</li>
<li><code>false</code> : HF clock source is <b>not</b> ready. </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4">OSCHF_AttemptToSwitchToXosc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// Return the readiness of the HF clock source</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4">DDI16BitfieldRead</a>(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0 target="_blank">DDI_0_OSC_O_STAT0</a>,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                              <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0_PENDINGSCLKHFSWITCHING target="_blank">DDI_0_OSC_STAT0_PENDINGSCLKHFSWITCHING_M</a>,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                              <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#STAT0_PENDINGSCLKHFSWITCHING target="_blank">DDI_0_OSC_STAT0_PENDINGSCLKHFSWITCHING_S</a>)) ?</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keyword">true</span> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div>
<div class="ttc" id="group__ddi__api_html_gac86ccf0590b9dbdc88eb1a6c856c78a4"><div class="ttname"><a href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4">DDI16BitfieldRead</a></div><div class="ttdeci">uint16_t DDI16BitfieldRead(uint32_t ui32Base, uint32_t ui32Reg, uint32_t ui32Mask, uint32_t ui32Shift)</div><div class="ttdoc">Read a bit field via the DDI using 16-bit read. </div><div class="ttdef"><b>Definition:</b> ddi.c:185</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_gae135dfece97e821338b93c4b32bc6980_cgraph.png" border="0" usemap="#group__osc__api_gae135dfece97e821338b93c4b32bc6980_cgraph" alt=""/></div>
<map name="group__osc__api_gae135dfece97e821338b93c4b32bc6980_cgraph" id="group__osc__api_gae135dfece97e821338b93c4b32bc6980_cgraph">
<area shape="rect" id="node2" href="group__ddi__api.html#gac86ccf0590b9dbdc88eb1a6c856c78a4" title="Read a bit field via the DDI using 16&#45;bit read. " alt="" coords="193,5,320,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac21e7c4532672c8fa7b90e493359ddc2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void OSCHfSourceSwitch </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switch the high frequency clock. </p>
<p>When switching the HF clock source the clock period might be prolonged leaving the clock 'stuck-at' high or low for a few cycles. To ensure that this does not coincide with a read access to the Flash, potentially freezing the device, the HF clock source switch must be executed from ROM.</p>
<dl class="section note"><dt>Note</dt><dd>This function will not return until the clock source has been switched. It is left to the programmer to ensure, that there is a pending request for a HF clock source switch before this function is called.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a> </dd></dl>

<p>Referenced by <a class="el" href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4">OSCHF_AttemptToSwitchToXosc()</a>, and <a class="el" href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c">OSCHF_SwitchToRcOscTurnOffXosc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// Read target clock (lower half of the 32-bit CTL0 register)</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    uint16_t hfSrc = HWREGH(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a> + <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a>) &amp; <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_HF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_HF_SRC_SEL_M</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// If target clock source is RCOSC, change clock source for DCDC to RCOSC</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span>(hfSrc == <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_HF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_HF_SRC_SEL_RCOSC</a>)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// Force DCDC to use RCOSC before switching SCLK_HF to RCOSC</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        HWREG(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a> + DDI_O_MASK16B + (<a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a> &lt;&lt; 1) + 4) = <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_CLK_DCDC_SRC_SEL target="_blank">DDI_0_OSC_CTL0_CLK_DCDC_SRC_SEL_M</a> | (<a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_CLK_DCDC_SRC_SEL target="_blank">DDI_0_OSC_CTL0_CLK_DCDC_SRC_SEL_M</a> &gt;&gt; 16);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="comment">// Dummy read to ensure that the write has propagated</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        HWREGH(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a> + <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// Switch the HF clock source</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="rom_8h.html#a54fd906640a81013fdc4b8159bfb3881">HapiHFSourceSafeSwitch</a>();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// If target clock source is XOSC, change clock source for DCDC to &quot;auto&quot;</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span>(hfSrc == <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_SCLK_HF_SRC_SEL target="_blank">DDI_0_OSC_CTL0_SCLK_HF_SRC_SEL_XOSC</a>)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="comment">// Set DCDC clock source back to &quot;auto&quot; after SCLK_HF was switched to XOSC</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        HWREG(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a> + DDI_O_MASK16B + (<a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a> &lt;&lt; 1) + 4) = <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_CLK_DCDC_SRC_SEL target="_blank">DDI_0_OSC_CTL0_CLK_DCDC_SRC_SEL_M</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="ttc" id="rom_8h_html_a54fd906640a81013fdc4b8159bfb3881"><div class="ttname"><a href="rom_8h.html#a54fd906640a81013fdc4b8159bfb3881">HapiHFSourceSafeSwitch</a></div><div class="ttdeci">#define HapiHFSourceSafeSwitch()      </div><div class="ttdef"><b>Definition:</b> rom.h:154</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga5f00114c27141d4a48934cad95b0daa0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void OSCXHfPowerModeSet </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set Power Mode for High Frequency XTAL Oscillator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Mode</td><td>is the power mode for the HF XTAL.<ul>
<li><a class="el" href="group__osc__api.html#ga04a634489a012ad9a677d6c020dbf2d4">LOW_POWER_XOSC</a></li>
<li><a class="el" href="group__osc__api.html#ga454f0708212697067b91a2cfb21fc73f">HIGH_POWER_XOSC</a></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Check the arguments.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a>((ui32Mode == <a class="code" href="group__osc__api.html#ga04a634489a012ad9a677d6c020dbf2d4">LOW_POWER_XOSC</a>) ||</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;           (ui32Mode == <a class="code" href="group__osc__api.html#ga454f0708212697067b91a2cfb21fc73f">HIGH_POWER_XOSC</a>));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// Change the power mode.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="group__ddi__api.html#gabdbaae7ecb063e23cb2f12198f419a5e">DDI16BitWrite</a>(<a href=../register_descriptions/CPU_MMAP/AUX_DDI0_OSC.html target="_blank">AUX_DDI0_OSC_BASE</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0 target="_blank">DDI_0_OSC_O_CTL0</a>, <a href=../register_descriptions/ANATOP_MMAP/DDI_0_OSC.html#CTL0_XOSC_HF_POWER_MODE target="_blank">DDI_0_OSC_CTL0_XOSC_HF_POWER_MODE</a>,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                  ui32Mode);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="ttc" id="group__osc__api_html_ga04a634489a012ad9a677d6c020dbf2d4"><div class="ttname"><a href="group__osc__api.html#ga04a634489a012ad9a677d6c020dbf2d4">LOW_POWER_XOSC</a></div><div class="ttdeci">#define LOW_POWER_XOSC</div><div class="ttdef"><b>Definition:</b> osc.h:112</div></div>
<div class="ttc" id="group__ddi__api_html_gabdbaae7ecb063e23cb2f12198f419a5e"><div class="ttname"><a href="group__ddi__api.html#gabdbaae7ecb063e23cb2f12198f419a5e">DDI16BitWrite</a></div><div class="ttdeci">void DDI16BitWrite(uint32_t ui32Base, uint32_t ui32Reg, uint32_t ui32Mask, uint32_t ui32WrData)</div><div class="ttdoc">Write a single bit using a 16-bit maskable write. </div><div class="ttdef"><b>Definition:</b> ddi.c:83</div></div>
<div class="ttc" id="group__osc__api_html_ga454f0708212697067b91a2cfb21fc73f"><div class="ttname"><a href="group__osc__api.html#ga454f0708212697067b91a2cfb21fc73f">HIGH_POWER_XOSC</a></div><div class="ttdeci">#define HIGH_POWER_XOSC</div><div class="ttdef"><b>Definition:</b> osc.h:113</div></div>
<div class="ttc" id="group__debug__api_html_ga28301f76c53b643912da7c538f74e2c6"><div class="ttname"><a href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a></div><div class="ttdeci">#define ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> debug.h:73</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__osc__api_ga5f00114c27141d4a48934cad95b0daa0_cgraph.png" border="0" usemap="#group__osc__api_ga5f00114c27141d4a48934cad95b0daa0_cgraph" alt=""/></div>
<map name="group__osc__api_ga5f00114c27141d4a48934cad95b0daa0_cgraph" id="group__osc__api_ga5f00114c27141d4a48934cad95b0daa0_cgraph">
<area shape="rect" id="node2" href="group__ddi__api.html#gabdbaae7ecb063e23cb2f12198f419a5e" title="Write a single bit using a 16&#45;bit maskable write. " alt="" coords="211,5,315,32"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga454f0708212697067b91a2cfb21fc73f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HIGH_POWER_XOSC&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__osc__api.html#ga5f00114c27141d4a48934cad95b0daa0">OSCXHfPowerModeSet()</a>.</p>

</div>
</div>
<a class="anchor" id="ga04a634489a012ad9a677d6c020dbf2d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOW_POWER_XOSC&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__osc__api.html#ga5f00114c27141d4a48934cad95b0daa0">OSCXHfPowerModeSet()</a>.</p>

</div>
</div>
<a class="anchor" id="ga69c226c32f77c516b33207cc23179c34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSC_RCOSC_HF&#160;&#160;&#160;0x00000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>, and <a class="el" href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c">OSCHF_SwitchToRcOscTurnOffXosc()</a>.</p>

</div>
</div>
<a class="anchor" id="ga77f1adccd50f1b219d9657ba2ac7dd9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSC_RCOSC_LF&#160;&#160;&#160;0x00000002</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>, and <a class="el" href="group__setup__rom__api.html#ga8145bf9a87ccdba3bfc95e83046e1db5">SetupAfterColdResetWakeupFromShutDownCfg3()</a>.</p>

</div>
</div>
<a class="anchor" id="gac53cc71494c69f6f486be9b3b0566b83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSC_SRC_CLK_HF&#160;&#160;&#160;0x00000001</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet()</a>, <a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>, <a class="el" href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4">OSCHF_AttemptToSwitchToXosc()</a>, <a class="el" href="group__osc__api.html#ga9eeb99e769d9c911305ff4c3c33c736c">OSCHF_SwitchToRcOscTurnOffXosc()</a>, <a class="el" href="group__osc__api.html#gaee5a511c4ca70e8eb66f4a6252488506">OSCHF_TurnOnXosc()</a>, and <a class="el" href="group__setup__rom__api.html#ga8145bf9a87ccdba3bfc95e83046e1db5">SetupAfterColdResetWakeupFromShutDownCfg3()</a>.</p>

</div>
</div>
<a class="anchor" id="gac57298ac9008f605f9b2c70609790bab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSC_SRC_CLK_LF&#160;&#160;&#160;0x00000004</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__osc__api.html#ga279bd3a34548bd4c5e2fc6939f7be228">OSCClockSourceGet()</a>, <a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>, and <a class="el" href="group__setup__rom__api.html#ga8145bf9a87ccdba3bfc95e83046e1db5">SetupAfterColdResetWakeupFromShutDownCfg3()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa167a08c9239cfcfefb8c35bf984ce8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSC_XOSC_HF&#160;&#160;&#160;0x00000001</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>, <a class="el" href="group__osc__api.html#ga47914d2750ee826560f2107a567bb1a4">OSCHF_AttemptToSwitchToXosc()</a>, <a class="el" href="group__osc__api.html#gaee5a511c4ca70e8eb66f4a6252488506">OSCHF_TurnOnXosc()</a>, and <a class="el" href="group__setup__rom__api.html#ga8145bf9a87ccdba3bfc95e83046e1db5">SetupAfterColdResetWakeupFromShutDownCfg3()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6502b0b712473f2ec7a4112cda0725bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSC_XOSC_LF&#160;&#160;&#160;0x00000003</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__osc__api.html#ga37a02687fbd8680396550f682a7f046f">OSCClockSourceSet()</a>, and <a class="el" href="group__setup__rom__api.html#ga8145bf9a87ccdba3bfc95e83046e1db5">SetupAfterColdResetWakeupFromShutDownCfg3()</a>.</p>

</div>
</div>
<a class="anchor" id="gac1ba5bef7e258c7f1fed491c6845996e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCLK_HF_RCOSC_HF&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga340b66c991d417f89cbe25b2260cf5c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCLK_HF_XOSC_HF&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gadc1d42af2ba486782a1c476aae978549"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCLK_LF_FROM_RCOSC_HF&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gaef0fb03f0835b8a156ab2e0218272546"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCLK_LF_FROM_RCOSC_LF&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga019f1e54cf5ba618b6341c69ca1f406d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCLK_LF_FROM_XOSC_HF&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga1b670764f36a095fcf02b3efc898ea6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCLK_LF_FROM_XOSC_LF&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">&copy Copyright 2015 - 2020 Texas Instruments Incorporated. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
